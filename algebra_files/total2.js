"$s based on Zepto v1.1.3 - zepto event ajax form ie - zeptojs.com/license";var $s={};(function(){var a=[];$s.inArray=function(e,f,d){return a.indexOf.call(f,e,d)};$s.isArray=Array.isArray||function(d){return d instanceof Array};function b(d){return typeof d.length=="number"}function c(d){return d.length>0?a.concat.apply([],d):d}$s.each=function(f,g){var e,d;if(b(f)){for(e=0;e<f.length;e++){if(g.call(f[e],e,f[e])===false){return f}}}else{for(d in f){if(g.call(f[d],d,f[d])===false){return f}}}return f};$s.grep=function(d,e){return a.filter.call(d,e)};$s.map=function(h,j){var g,d=[],f,e;if(b(h)){for(f=0;f<h.length;f++){g=j(h[f],f);if(g!=null){d.push(g)}}}else{for(e in h){g=j(h[e],e);if(g!=null){d.push(g)}}}return c(d)};$s.extend=function(){for(var e=1;e<arguments.length;e++){for(var d in arguments[e]){if(arguments[e].hasOwnProperty(d)){arguments[0][d]=arguments[e][d]}}}return arguments[0]}})();var KhanUtil={};var TryUtil={};$s.extend(KhanUtil,{roundPrec:function(f){var a=1000000;if(f>=0){var e=Math.floor(f);var c=f-e;if(Math.abs(c)>0.00001||e!==0){c=Math.round(c*a)/a;f=e+c}}else{var b=Math.ceil(f);var d=f-b;if(Math.abs(d)>0.00001||b!==0){d=Math.round(d*a)/a;f=b+d}}return f},roundTowardsZero:function(a){if(a<0){return Math.ceil(a-0.001)}return Math.floor(a+0.001)},getGCD:function(d,c){if(arguments.length>2){var f=[].slice.call(arguments,1);return KhanUtil.getGCD(d,KhanUtil.getGCD.apply(KhanUtil,f))}else{var e;d=Math.abs(d);c=Math.abs(c);while(c){e=d%c;d=c;c=e}return d}},getLCM:function(d,c){if(arguments.length>2){var e=[].slice.call(arguments,1);return KhanUtil.getLCM(d,KhanUtil.getLCM.apply(KhanUtil,e))}else{return Math.abs(d*c)/KhanUtil.getGCD(d,c)}},primes:[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97],getPrime:function(){return KhanUtil.primes[KhanUtil.rand(KhanUtil.primes.length)]},isPrime:function(c){if(c<=1){return false}else{if(c<101){return!!$s.grep(KhanUtil.primes,function(e,d){return Math.abs(e-c)<=0.5}).length}else{if(c<=1||c>2&&c%2===0){return false}else{for(var a=3,b=Math.sqrt(c);a<=b;a+=2){if(c%a===0){return false}}}return true}}},isOdd:function(a){return a%2===1},isEven:function(a){return a%2===0},getPrimeFactorization:function(b){if(b===1){return[]}else{if(KhanUtil.isPrime(b)){return[b]}}var a=Math.sqrt(b);for(var c=2;c<=a;c++){if(b%c===0){return KhanUtil.getPrimeFactorization(c).concat(KhanUtil.getPrimeFactorization(b/c))}}},getFactors:function(c){var e=[],b=function(f){if(_(e).indexOf(f)===-1){e.push(f)}};var a=c;for(var d=1;d*d<=a;d++){if(c%d===0){b(d);b(c/d)}}return KhanUtil.sortNumbers(e)},sortNumbers:function(a){return a.slice(0).sort(function(d,c){return d-c})},roundTo:function(a,b){var c=Math.pow(10,a).toFixed(5);return Math.round((b*c).toFixed(5))/c},toFraction:function(d,g){if(g==null){g=Math.pow(2,-46)}if(d<0||d>1){var j=d%1;j+=(j<0?1:0);var c=KhanUtil.toFraction(j,g);c[0]+=Math.round(d-j)*c[1];return c}else{if(Math.abs(Math.round(Number(d))-d)<=g){return[Math.round(d),1]}else{var e=0,i=1,h=1,a=1,b=1,f=2;while(1){if(Math.abs(Number(b/f)-d)<=g){return[b,f]}else{if(b/f<d){e=b;i=f}else{h=b;a=f}}b=e+h;f=i+a}}}},getMultiples:function(c,b){var d=[];for(var a=1;a*c<=b;a++){d.push(a*c)}return d},splitRadical:function(d){if(d===0){return[0,1]}var b=1;var a=d;for(var c=2;c*c<=d;c++){while(a%(c*c)===0){a/=c*c;b*=c}}return[b,a]},reduce:function(c,b){var a=KhanUtil.getGCD(c,b);c=c/a;b=b/a;return[c,b]},reduces:function(b,a){return KhanUtil.getGCD(b,a)>1},shuffle:function(f,c){f=[].slice.call(f,0);var e=typeof c==="undefined"||c>f.length?0:f.length-c;for(var d=f.length;d>e;d--){var b=Math.floor(KhanUtil.random()*d),a=f[b];f[b]=f[d-1];f[d-1]=a}return f.slice(e)},});(function e(b,g,d){function c(m,j){if(!g[m]){if(!b[m]){var i=typeof require=="function"&&require;if(!j&&i){return i(m,!0)}if(a){return a(m,!0)}var k=new Error("Cannot find module '"+m+"'");throw k.code="MODULE_NOT_FOUND",k}var h=g[m]={exports:{}};b[m][0].call(h.exports,function(l){var o=b[m][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[m].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(d,c,g){var k=function(q){return new KhanUtil.Polynomial(0,0,[q])};KhanUtil.mconstant=function(q){return new KhanUtil.MPolynomial({"0":q})};KhanUtil.mfconstant=function(q){return new KhanUtil.MFPolynomial({"0":q})};function l(q){var s=KhanUtil.evalExpr(q);var r=KhanUtil.roundPrec(s);return r}function f(q){var r=KhanUtil.exprToPoly(q);var s=r.polyToExpr();return s}function p(q){var r=KhanUtil.exprToMPoly(q);var s=r.polyToExpr();return s}function h(q){var r=KhanUtil.exprToMFPoly(q);var s=r.polyToExpr();return s}function n(q){if(KhanUtil.isUniformVar(q)){return f(q)}else{if(KhanUtil.isMVar(q)){return p(q)}else{return h(q)}}}function i(q){if(!KhanUtil.containsVar(q)){return l(q)}else{if(KhanUtil.isMVar(q)){return n(q)}else{if(KhanUtil.isMFVar(q)){return h(q)}else{if(KhanUtil.containsVar(q)){return NaN}else{return l(q)}}}}}function o(r){var q="";try{q=MutMyPolyExpr(r)}catch(s){q=KhanUtil.evalGeneral(r)}return q}KhanUtil.evalGeneral=i;KhanUtil.evalGenVarSilent=n;KhanUtil.evalAnsSilent=l;KhanUtil.evalAnsMVarSilent=p;KhanUtil.evalAnsMFVarSilent=h;KhanUtil.evalAnsVarSilent=f;KhanUtil.fracExpr=o;var m=function(t,s){var q=false;if(typeof t==="object"){var u=t[0],r=t.slice(1);if(u==="var"){if(typeof s==="undefined"){q=true}else{q=(r[0]===s)}}else{$s.each(r,function(w,v){var x=m(v,s);q=q||x})}}return q};KhanUtil.containsVar=m;$s.extend(KhanUtil,{myexpr:function(s,r){if(typeof s==="object"){var t=s[0],q=s.slice(1);return this.mytable[t].apply(this,q)}else{return r?s:s.toString()}},myExprObj:function(q){var r={};r.mytable=q;r.myexpr=KhanUtil.myexpr;r.myexprParenthesize=KhanUtil.myexprParenthesize;r.myexprParenthesizeOld=KhanUtil.myexprParenthesizeOld;r.myMakeParen=KhanUtil.myMakeParen;r.myOptParen=KhanUtil.myOptParen;return r},expr:function(s,r){var q=r?KhanUtil.myComputeOperators:KhanUtil.myFormatOperators;var t=KhanUtil.myExprObj(q);return t.myexpr(s,r)},exprToText:function(q){var r=KhanUtil.myExprObj(KhanUtil.myFormatOperators);return r.myexpr(q,false)},myParenthesize:function(q){var r=KhanUtil.myExprObj(KhanUtil.myFormatOperators);return r.myexprParenthesize(q)},myParenNow:function(q){var r=KhanUtil.myExprObj(KhanUtil.myFormatOperators);return r.myMakeParen(q)},exprToFracText:function(r){var q=$s.extend({},KhanUtil.myFormatOperators,KhanUtil.formatFracOperators);var s=KhanUtil.myExprObj(q);return s.myexpr(r,false)},exprToQeqText:function(r){var q=$s.extend({},KhanUtil.myFormatOperators,KhanUtil.formatQeqOperators);var s=KhanUtil.myExprObj(q);return s.myexpr(r,false)},exprToNeqText:function(r){var q=$s.extend({},KhanUtil.myFormatOperators,KhanUtil.formatNeqOperators);var s=KhanUtil.myExprObj(q);return s.myexpr(r,false)},exprToNeqPolyText:function(r){var q=$s.extend({},KhanUtil.myFormatOperators,KhanUtil.formatNeqPolyOperators);var s=KhanUtil.myExprObj(q);return s.myexpr(r,false)},evalExpr:function(q){var r=KhanUtil.myExprObj(KhanUtil.myComputeOperators);return r.myexpr(q,true)},evalExprPoly:function(r){var q=KhanUtil.exprToPoly(r);var s=q.polyToExpr();return s},evalExprMPoly:function(r){var q=KhanUtil.exprToMPoly(r);var s=q.polyToExpr();return s},exprToPoly:function(s){if(typeof s==="object"){var t=s[0],q=s.slice(1),r=KhanUtil.computePolyOperators;return r[t].apply(this,q)}else{return k(s)}},exprToMPoly:function(s){if(typeof s==="object"){var t=s[0],q=s.slice(1),r=KhanUtil.computeMPolyOperators;return r[t].apply(this,q)}else{return KhanUtil.mconstant(s)}},exprToMFPoly:function(s){if(typeof s==="object"){var t=s[0],q=s.slice(1),r=KhanUtil.computeMFPolyOperators;return r[t].apply(this,q)}else{return KhanUtil.mfconstant(s)}},isNumber:function(r){if(typeof r==="number"){return true}else{if(r instanceof Array){var s=r[0],q=r.slice(1);return((s==="-")&&q.length===1&&KhanUtil.isNumber(q[0]))}else{return false}}},isInt:function(q){return typeof q==="number"&&q%1===0},isIntF:function(q){if(typeof q==="number"){return false}else{if(typeof q==="object"){return(q.length===2&&KhanUtil.isNumber(q[0])&&KhanUtil.isNumber(q[1])&&KhanUtil.isInt(KhanUtil.evalExpr(q[0]))&&KhanUtil.isInt(KhanUtil.evalExpr(q[1]))&&KhanUtil.evalExpr(q[1])!==0)}else{console.log("ERROR55");return false}}},isFrac:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);return((s==="/"||s==="dfrac")&&q.length===2&&KhanUtil.isUniformInt(q[0])&&KhanUtil.isUniformInt(q[1])&&KhanUtil.isInt(KhanUtil.evalExpr(q[0]))&&KhanUtil.isInt(KhanUtil.evalExpr(q[1]))&&KhanUtil.evalExpr(q[1])!==0)}else{console.log("ERROR55");return false}}},isMixed:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);return((s==="space")&&q.length===2&&KhanUtil.isUniformInt(q[0])&&KhanUtil.isInt(KhanUtil.evalExpr(q[0]))&&KhanUtil.isFrac(q[1]))}else{console.log("ERROR55");return false}}},isGenFrac:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);return((s==="/"||s==="dfrac")&&q.length===2&&KhanUtil.isUniformVarInt(q[0])&&KhanUtil.isUniformVarInt(q[1])&&!(KhanUtil.isNumber(q[1])&&KhanUtil.evalExpr(q[1])===0))}else{console.log("ERROR55");return false}}},isFracOrNonzeroNumber:function(r){if(KhanUtil.isNumber(r)){return(KhanUtil.evalExpr(r)!==0)}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);return((s==="/")&&q.length===2&&KhanUtil.isNumber(q[0])&&KhanUtil.isNumber(q[1])&&KhanUtil.isInt(KhanUtil.evalExpr(q[0]))&&KhanUtil.isInt(KhanUtil.evalExpr(q[1]))&&KhanUtil.evalExpr(q[1])!==0)}else{console.log("ERROR55");return false}}},isFracMixedOrNonzeroNumber:function(q){return(KhanUtil.isFracOrNonzeroNumber(q)||KhanUtil.isMixed(q))},isExp:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);return((s==="^")&&q.length===2&&KhanUtil.isNumber(q[1])&&(KhanUtil.isNumber(q[0])||(KhanUtil.isUniformVar(q[0])&&KhanUtil.isInt(KhanUtil.evalExpr(q[1])))))}else{console.log("ERROR55");return false}}},isGenFracExp:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);return((s==="^")&&q.length===2&&KhanUtil.isNumber(q[1])&&KhanUtil.isGenFrac(q[0])&&KhanUtil.isInt(KhanUtil.evalExpr(q[1])))}else{console.log("ERROR55");return false}}},isBaseNum:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);return((s==="^")&&q.length===2&&KhanUtil.isNumber(q[0])&&KhanUtil.isNumber(q[1]))}else{console.log("ERROR55");return false}}},isExpOrBase:function(q){if(KhanUtil.isNumber(q)||KhanUtil.myExprType(q)==="var"){return true}else{return KhanUtil.isExp(q)}},isExpStrict:function(q){if(KhanUtil.myExprType(q)==="var"){return false}else{return KhanUtil.isExp(q)&&(KhanUtil.isBaseNum(q)||KhanUtil.myExprType(q[1])==="var")}},isExpVar:function(q){if(KhanUtil.myExprType(q)==="var"){return false}else{return KhanUtil.isExp(q)&&(KhanUtil.myExprType(q[1])==="var")&&KhanUtil.evalExpr(q[2])>0}},isEqual:function(s,r){if(typeof s==="number"&&typeof r==="number"){return s===r}else{if(typeof s==="string"&&typeof r==="string"){return s===r}else{if(typeof s==="object"&&typeof r==="object"){if(s.length===r.length&&s.length>1&&s[0]===r[0]){for(var q=1;q<s.length;q++){if(!KhanUtil.isEqual(s[q],r[q])){return false}}return true}else{return false}}else{return false}}}},fReduces:function(q){if(KhanUtil.isIntF(q)){return KhanUtil.fracReduces(q)}else{return KhanUtil.fGenReduces(q)}},fReduce:function(q){if(KhanUtil.isIntF(q)){return KhanUtil.fracReduce(q)}else{return KhanUtil.fGenReduce(q)}},fGenReduces:function(s){var t=KhanUtil.exprToPoly(s[0]);var q=KhanUtil.exprToPoly(s[1]);var r=t.gcd(q);return r>1},fGenReduce:function(t){var u=KhanUtil.exprToPoly(t[0]);var q=KhanUtil.exprToPoly(t[1]);var s=u.gcd(q);if(s>1){u=u.multiply(1/s);q=q.multiply(1/s)}var r=u.polyToExpr();var v=q.polyToExpr();return[r,v]},fracReduces:function(q){return KhanUtil.reduces(q[0],q[1])},fracReduce:function(q){return KhanUtil.reduce(q[0],q[1])},getNumerator:function(r){if(KhanUtil.isNumber(r)){return KhanUtil.evalExpr(r)}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if((s==="/"||s==="dfrac")&&q.length===2){if(KhanUtil.isFrac(r)){return KhanUtil.evalExpr(q[0])}else{return KhanUtil.evalExprPoly(q[0])}}else{return false}}else{console.log("ERROR55");return false}}},getDenominator:function(r){if(KhanUtil.isNumber(r)){return 1}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if((s==="/"||s==="dfrac")&&q.length===2){if(KhanUtil.isFrac(r)){return KhanUtil.evalExpr(q[1])}else{return KhanUtil.evalExprPoly(q[1])}}else{return false}}else{console.log("ERROR55");return false}}},getBase:function(q){if(KhanUtil.isNumber(q)){return KhanUtil.fracExpr(q)}else{if(KhanUtil.myExprType(q)==="var"){return KhanUtil.fracExpr(q)}else{if(KhanUtil.isBaseNum(q)){return KhanUtil.fracExpr(q[1])}else{if(KhanUtil.isExp(q)){return KhanUtil.fracExpr(q[1])}else{if(KhanUtil.isGenFracExp(q)){return q[1]}else{return false}}}}}},getPower:function(r){if(KhanUtil.isNumber(r)||KhanUtil.myExprType(r)==="var"){return 1}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if((s==="^")&&q.length===2&&KhanUtil.isNumber(q[1])){return KhanUtil.evalExpr(q[1])}else{return false}}else{console.log("ERROR55");return false}}},getAddBase:function(q){if(KhanUtil.isNumber(q)){return 1}else{if(KhanUtil.myExprType(q)==="var"){return KhanUtil.evalExprPoly(q)}else{if(KhanUtil.isExpVar(q)){return KhanUtil.evalExprPoly(q)}else{if(KhanUtil.isCoefVar(q)){return KhanUtil.evalExprPoly(q[2])}else{if(KhanUtil.isCoefSimpleExp(q)&&KhanUtil.isExpVar(q[2])){return KhanUtil.evalExprPoly(q[2])}else{if(KhanUtil.isNegSimpleExp(q)&&(KhanUtil.isExpVar(q[1])||KhanUtil.myExprType(q[1])==="var")){return KhanUtil.evalExprPoly(q[1])}else{return false}}}}}}},getAddCoef:function(q){if(KhanUtil.isNumber(q)){return KhanUtil.evalExpr(q)}else{if(KhanUtil.myExprType(q)==="var"){return 1}else{if(KhanUtil.isExpVar(q)){return 1}else{if(KhanUtil.isCoefVar(q)){return KhanUtil.evalExpr(q[1])}else{if(KhanUtil.isCoefSimpleExp(q)&&KhanUtil.isExpVar(q[2])){return KhanUtil.evalExpr(q[1])}else{if(KhanUtil.isNegSimpleExp(q)&&(KhanUtil.isExpVar(q[1])||KhanUtil.myExprType(q[1])==="var")){return-1}else{return false}}}}}}},getAddPower:function(r){try{r=KhanUtil.evalGenVarSilent(r);if(KhanUtil.isNumber(r)){return 0}else{if(KhanUtil.myExprType(r)==="var"){return 1}else{if(KhanUtil.isExpVar(r)){return KhanUtil.evalExpr(r[2])}else{if(KhanUtil.isCoefVar(r)){return 1}else{if(KhanUtil.isCoefSimpleExp(r)&&KhanUtil.isExpVar(r[2])){return KhanUtil.evalExpr(r[2][2])}else{if(KhanUtil.isNegSimpleExp(r)&&KhanUtil.isExpVar(r[1])){return KhanUtil.evalExpr(r[1][2])}else{if(KhanUtil.isNegSimpleExp(r)&&(KhanUtil.myExprType(r[1])==="var")){return 1}else{return false}}}}}}}}catch(q){return false}},isGenCoefVar:function(q){if(KhanUtil.isNumber(q)){return false}else{if(KhanUtil.myExprType(q)==="var"){return true}else{if(KhanUtil.isExpVar(q)){return true}else{if(KhanUtil.isCoefVar(q)){return true}else{if(KhanUtil.isCoefSimpleExp(q)&&KhanUtil.isExpVar(q[2])){return true}else{if(KhanUtil.isNegSimpleExp(q)&&(KhanUtil.isExpVar(q[1])||KhanUtil.myExprType(q[1])==="var")){return true}else{return false}}}}}}},isSimpleAdd:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if((s==="+")||(s==="-")){return(q.length===2&&KhanUtil.isNumber(q[0])&&KhanUtil.isNumber(q[1]))}else{return false}}else{console.log("ERROR55");return false}}},isSimpleMult:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if((s==="*")){return(q.length===2&&KhanUtil.isNumber(q[0])&&KhanUtil.isNumber(q[1]))}else{return false}}else{console.log("ERROR55");return false}}},isSimpleFracExp:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if(s==="^"){return(q.length===2&&KhanUtil.isFrac(q[0])&&KhanUtil.isNumber(q[1])&&KhanUtil.isInt(KhanUtil.evalExpr(q[1]))&&(Math.abs(KhanUtil.evalExpr(q[1]))<10))}else{return false}}else{console.log("ERROR55");return false}}},isSimpleGenFracExp:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if(s==="^"){return(KhanUtil.isGenFracExp(r)&&(Math.abs(KhanUtil.evalExpr(q[1]))<10))}else{return false}}else{console.log("ERROR55");return false}}},isSimpleGenCoefAdd:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if((s==="+")||(s==="-")){return(q.length===2&&KhanUtil.isGenCoefVar(q[0])&&KhanUtil.isGenCoefVar(q[1])&&KhanUtil.isEqual(KhanUtil.getAddBase(q[0]),KhanUtil.getAddBase(q[1]))&&KhanUtil.isInt(KhanUtil.getAddCoef(q[0]))&&KhanUtil.isInt(KhanUtil.getAddCoef(q[1]))&&KhanUtil.getAddCoef(q[0])!==0&&KhanUtil.getAddCoef(q[1])!==0&&(Math.abs(KhanUtil.getAddCoef(q[0]))+Math.abs(KhanUtil.getAddCoef(q[1]))<15))}else{return false}}else{console.log("ERROR55");return false}}},isSimpleFracAdd:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if((s==="+")||(s==="-")){return(q.length===2&&KhanUtil.isFracOrNonzeroNumber(q[0])&&KhanUtil.isFracOrNonzeroNumber(q[1])&&(KhanUtil.isFrac(q[0])||KhanUtil.isFrac(q[1])))}else{return false}}else{console.log("ERROR55");return false}}},isSimpleFracMixedAdd:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if((s==="+")||(s==="-")){return(q.length===2&&KhanUtil.isFracMixedOrNonzeroNumber(q[0])&&KhanUtil.isFracMixedOrNonzeroNumber(q[1])&&(KhanUtil.isMixed(q[0])||KhanUtil.isMixed(q[1])))}else{return false}}else{console.log("ERROR55");return false}}},isSimpleFracMult:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if((s==="*")||(s==="/")){return(q.length===2&&KhanUtil.isFracOrNonzeroNumber(q[0])&&KhanUtil.isFracOrNonzeroNumber(q[1])&&(KhanUtil.isFrac(q[0])||KhanUtil.isFrac(q[1])))}else{return false}}else{console.log("ERROR55");return false}}},isSimpleFracMixedMult:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if((s==="*")||(s==="/")){return(q.length===2&&KhanUtil.isFracMixedOrNonzeroNumber(q[0])&&KhanUtil.isFracMixedOrNonzeroNumber(q[1])&&(KhanUtil.isMixed(q[0])||KhanUtil.isMixed(q[1])))}else{return false}}else{console.log("ERROR55");return false}}},isSimpleExp:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if(s==="^"){return(KhanUtil.isExp(r)&&KhanUtil.isInt(KhanUtil.getPower(r))&&(Math.abs(KhanUtil.getPower(r))<15))}else{return false}}else{console.log("ERROR55");return false}}},isSimpleExp0:function(q){if(typeof q==="number"){return false}else{if(typeof q==="object"){return(KhanUtil.isSimpleExp(q)&&KhanUtil.getPower(q)!==0)}else{console.log("ERROR55");return false}}},isCoefVar:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if(s==="*"){return(q.length===2&&KhanUtil.isNumber(q[0])&&KhanUtil.myExprType(q[1])==="var")}else{return false}}else{console.log("ERROR55");return false}}},isCoefSimpleExp:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if(s==="*"){return(q.length===2&&KhanUtil.isNumber(q[0])&&KhanUtil.isSimpleExp(q[1]))}else{return false}}else{console.log("ERROR55");return false}}},isCoefSimpleExpMult:function(t){if(typeof t==="number"){return false}else{if(typeof t==="object"){var u=t[0],q=t.slice(1);if(u==="*"&&q.length===2){var s=q[0][2];var r=q[1][2];return(q.length===2&&KhanUtil.isCoefSimpleExp(q[0])&&KhanUtil.isCoefSimpleExp(q[1])&&(KhanUtil.isExpStrict(s)||KhanUtil.isExpStrict(r))&&KhanUtil.isEqual(KhanUtil.getBase(s),KhanUtil.getBase(r))&&KhanUtil.getPower(s)>0&&KhanUtil.getPower(r)>0&&(Math.abs(KhanUtil.getPower(s))+Math.abs(KhanUtil.getPower(r))<30))}else{return false}}else{console.log("ERROR55");return false}}},getProdFactors:function(z){if(typeof z.prodfactors==="undefined"){var s=[];var A=0;if(typeof z==="object"){var t=z[0],w=z.slice(1);if(t==="*"&&w.length===2){var r=KhanUtil.getProdFactors(w[0]);var y=r[0];var v=r[1];if(y.length>0){var q=KhanUtil.getProdFactors(w[1]);var x=q[0];var u=q[1];if(x.length>0){s=y;s.push.apply(s,x);A=v+u}else{return[[],0]}}else{return[[],0]}}else{if(KhanUtil.isNumber(z)||KhanUtil.myExprType(z)==="var"||KhanUtil.isExpStrict(z)){if(KhanUtil.isNumber(z)){A=1}s=[z]}else{s=[]}}}else{if(KhanUtil.isNumber(z)){A=1;s=[z]}else{}}}return[s,A]},getAddTerms:function(B){if(typeof B.addterms==="undefined"){var D=[];var C=0;if(typeof B==="object"){var v=B[0],A=B.slice(1);if((v==="+"||v==="-")&&A.length===2){var r=KhanUtil.getAddTerms(A[0]);var z=r[0];var y=r[1];if(z.length>0){var q=KhanUtil.getAddTerms(A[1]);var x=q[0];var w=q[1];if(x.length>0){D=z;if(v==="+"){D.push.apply(D,x)}else{for(var t=0;t<x.length;t++){var u=KhanUtil.fracExpr(["*",-1,x[t]]);D.push(u)}}C=y+w}else{return[[],0]}}else{return[[],0]}}else{if((v==="+")&&A.length>2){var r=KhanUtil.getAddTerms(A[0]);var z=r[0];var y=r[1];var q=r;var x=z;var w=y;D=z;C=y;for(var s=1;s<A.length;s++){if(x.length>0){var q=KhanUtil.getAddTerms(A[s]);var x=q[0];var w=q[1];if(x.length>0){if(v==="+"){D.push.apply(D,x)}else{for(var t=0;t<x.length;t++){var u=KhanUtil.fracExpr(["*",-1,x[t]]);D.push(u)}}C=y+w}else{return[[],0]}}else{return[[],0]}}}else{if(KhanUtil.isNumber(B)||KhanUtil.isMVar(B)){if(KhanUtil.isNumber(B)){C=1}D=[B]}else{D=[]}}}}else{if(KhanUtil.isNumber(B)){C=1;D=[B]}else{D=[]}}}return[D,C]},getMultFactors:function(z){if(typeof z.multfactors==="undefined"){var q=[];var A=0;if(typeof z==="object"){var t=z[0],y=z.slice(1);if((t==="*")&&y.length===2){var s=KhanUtil.getMultFactors(y[0]);var x=s[0];var w=s[1];if(x.length>0){var r=KhanUtil.getMultFactors(y[1]);var v=r[0];var u=r[1];if(v.length>0){q=x;q.push.apply(q,v);A=w+u}else{return[[],0]}}else{return[[],0]}}else{if(KhanUtil.isNumber(z)||true){if(KhanUtil.isNumber(z)){A=1}q=[z]}else{q=[]}}}else{if(KhanUtil.isNumber(z)){A=1;q=[z]}else{q=[]}}}return[q,A]},isLinear:function(q){if(!KhanUtil.isUniformVarInt(q)){return false}else{if(KhanUtil.exprToPoly(q).findMaxDegree()<=1){return true}else{return false}}},isMultLinearFactors:function(x){if(typeof x.ismultlinearfactors==="undefined"){x.ismultlinearfactors=false;if(typeof x==="object"){var u=x[0],v=x.slice(1);if(!KhanUtil.isUniformVarInt(x)){return false}else{var r=KhanUtil.getMultFactors(x);var q=r[0];var t=r[1];if(q.length>0){var y=true;for(var s=0;s<q.length;s++){var w=q[s];if(typeof w==="object"&&(w[0]==="^")&&w.length===3&&KhanUtil.isNumber(w[2])&&KhanUtil.isInt(KhanUtil.evalExpr(w[2]))){y=y&&KhanUtil.isLinear(w[1])}else{y=y&&KhanUtil.isLinear(w)}}x.ismultlinearfactors=y}else{x.ismultlinearfactors=false}}}}return x.ismultlinearfactors},isMultSimpFactors:function(x){if(typeof x.ismultsimpfactors==="undefined"){x.ismultsimpfactors=false;if(typeof x==="object"){var u=x[0],v=x.slice(1);if(!KhanUtil.isUniformVarInt(x)){return false}else{var r=KhanUtil.getMultFactors(x);var q=r[0];var t=r[1];if(q.length>0){console.log("here77");var y=true;for(var s=0;s<q.length;s++){var w=q[s];if(typeof w==="object"&&(w[0]==="^")&&w.length===3&&KhanUtil.isNumber(w[2])&&KhanUtil.isInt(KhanUtil.evalExpr(w[2]))){y=y&&KhanUtil.isAddTermsSimpNum(w[1])}else{y=y&&KhanUtil.isAddTermsSimpNum(w)}}x.ismultsimpfactors=y}else{x.ismultsimpfactors=false}}}}return x.ismultsimpfactors},isCoefExpProd:function(s){if(typeof s.iscoefexpprod==="undefined"){s.iscoefexpprod=false;if(typeof s==="object"){var v=s[0],u=s.slice(1);if(!KhanUtil.isUniformVar(s)){return false}else{var r=KhanUtil.getProdFactors(s);var q=r[0];var t=r[1];if(q.length>2&&q.length-t>1){s.iscoefexpprod=true}else{s.iscoefexpprod=false}}}}return s.iscoefexpprod},isAddTerms:function(t){var r=false;if(typeof t==="object"){var w=t[0],v=t.slice(1);if(!KhanUtil.isUniformVar(t)){return false}else{var s=KhanUtil.getAddTerms(t);var q=s[0];var u=s[1];if(q.length>1&&q.length-u>0){r=true}else{r=false}}}return r},isAddTermsGen0:function(t){var r=false;if(typeof t==="object"){var w=t[0],v=t.slice(1);if(!KhanUtil.isMVar(t)){return false}else{var s=KhanUtil.getAddTerms(t);var q=s[0];var u=s[1];if(q.length>0&&q.length-u>0){r=true}else{r=false}}}return r},isAddTermsGen1:function(t){var r=false;if(typeof t==="object"){var w=t[0],v=t.slice(1);if(!KhanUtil.isMVar(t)){return false}else{var s=KhanUtil.getAddTerms(t);var q=s[0];var u=s[1];if(q.length>1&&q.length-u>0){r=true}else{r=false}}}return r},isAddTermsForSimplify:function(s){if(typeof s.isaddtermsforsimplify==="undefined"){s.isaddtermsforsimplify=false;if(typeof s==="object"){var v=s[0],u=s.slice(1);if(!KhanUtil.isUniformVar(s)){return false}else{var r=KhanUtil.getAddTerms(s);var q=r[0];var t=r[1];if(q.length>0){s.isaddtermsforsimplify=true}else{s.isaddtermsforsimplify=false}}}}return s.isaddtermsforsimplify},isAddTermsSimplified:function(y){if(typeof y.isaddtermssimplified==="undefined"){y.isaddtermssimplified=false;if(typeof y==="object"){var w=y[0],x=y.slice(1);if(!KhanUtil.isUniformVar(y)){return false}else{var t=KhanUtil.getAddTerms(y);var z=t[0];var v=t[1];if(z.length>0){var s=[];var q=false;for(var u=0;u<z.length;u++){var A=z[u];var r=KhanUtil.exprToPoly(A).maxDegree;if($s.inArray(r,s)>-1){q=true}else{s.push(r)}}if(!q){y.isaddtermssimplified=true}}else{y.isaddtermssimplified=false}}}}return y.isaddtermssimplified},isAddTermsSimpNum:function(t){var r=false;if(typeof t==="object"){var w=t[0],v=t.slice(1);if(!KhanUtil.isUniformVar(t)){return false}else{var s=KhanUtil.getAddTerms(t);var q=s[0];var u=s[1];if(q.length>0&&u<2){r=true}else{r=false}}}return r},isAddTermsMult:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if((s==="*")){return(q.length===2&&KhanUtil.isMVar(r)&&(KhanUtil.isAddTermsGen0(q[0])||KhanUtil.isNumber(q[0]))&&(KhanUtil.isAddTermsGen0(q[1])||KhanUtil.isNumber(q[1]))&&(KhanUtil.isAddTermsGen1(q[0])||KhanUtil.isAddTermsGen1(q[1])))}else{return false}}else{console.log("ERROR55");return false}}},isAddTermsSq:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if((s==="^")){return(q.length===2&&KhanUtil.isAddTermsGen1(q[0])&&KhanUtil.myExprType(q[0])!=="var"&&!KhanUtil.isNumber(q[0])&&!m(q[1])&&KhanUtil.evalExpr(q[1])===2)}else{return false}}else{console.log("ERROR55");return false}}},isAddTermsCube:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if((s==="^")){return(q.length===2&&KhanUtil.isAddTermsGen1(q[0])&&KhanUtil.myExprType(q[0])!=="var"&&!KhanUtil.isNumber(q[0])&&!m(q[1])&&KhanUtil.evalExpr(q[1])===3)}else{return false}}else{console.log("ERROR55");return false}}},isNegSimpleExp:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if(s==="-"){return(q.length===1&&(KhanUtil.isSimpleExp(q[0])||KhanUtil.myExprType(q[0])==="var"))}else{return false}}else{console.log("ERROR55");return false}}},isSimpleExpMult:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if(s==="*"){return(q.length===2&&KhanUtil.isExpOrBase(q[0])&&KhanUtil.isExpOrBase(q[1])&&(KhanUtil.isExpStrict(q[0])||KhanUtil.isExpStrict(q[1]))&&KhanUtil.isEqual(KhanUtil.getBase(q[0]),KhanUtil.getBase(q[1]))&&KhanUtil.getBase(q[0])!==0&&KhanUtil.isInt(KhanUtil.getPower(q[0]))&&KhanUtil.isInt(KhanUtil.getPower(q[1]))&&(Math.abs(KhanUtil.getPower(q[0]))+Math.abs(KhanUtil.getPower(q[1]))<30))}else{return false}}else{console.log("ERROR55");return false}}},isSimpleExpDiv:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if(s==="/"){return(q.length===2&&KhanUtil.isExpOrBase(q[0])&&KhanUtil.isExpOrBase(q[1])&&(KhanUtil.isExpStrict(q[0])||KhanUtil.isExpStrict(q[1]))&&KhanUtil.isEqual(KhanUtil.getBase(q[0]),KhanUtil.getBase(q[1]))&&KhanUtil.getBase(q[0])!==0&&KhanUtil.isInt(KhanUtil.getPower(q[0]))&&KhanUtil.isInt(KhanUtil.getPower(q[1]))&&(Math.abs(KhanUtil.getPower(q[0]))+Math.abs(KhanUtil.getPower(q[1]))<30)&&KhanUtil.getPower(q[0])>=0&&KhanUtil.getPower(q[1])>=0)}else{return false}}else{console.log("ERROR55");return false}}},isExpMult:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if(s==="*"){return(q.length===2&&KhanUtil.isExpOrBase(q[0])&&KhanUtil.isExpOrBase(q[1])&&(KhanUtil.isExpStrict(q[0])||KhanUtil.isExpStrict(q[1]))&&KhanUtil.isEqual(KhanUtil.getBase(q[0]),KhanUtil.getBase(q[1]))&&KhanUtil.getBase(q[0])!==0)}else{return false}}else{console.log("ERROR55");return false}}},isExpDiv:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if(s==="/"){return(q.length===2&&KhanUtil.isExpOrBase(q[0])&&KhanUtil.isExpOrBase(q[1])&&(KhanUtil.isExpStrict(q[0])||KhanUtil.isExpStrict(q[1]))&&KhanUtil.isEqual(KhanUtil.getBase(q[0]),KhanUtil.getBase(q[1]))&&KhanUtil.getBase(q[0])!==0)}else{return false}}else{console.log("ERROR55");return false}}},isSimpleExpExp:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if(s==="^"){return(q.length===2&&KhanUtil.isExp(q[0])&&KhanUtil.isInt(KhanUtil.getPower(q[0]))&&KhanUtil.isNumber(q[1])&&KhanUtil.isInt(KhanUtil.evalExpr(q[1]))&&(KhanUtil.evalExpr(q[1])>0)&&(Math.abs(KhanUtil.getPower(q[0]))*Math.abs(KhanUtil.evalExpr(q[1]))<20))}else{return false}}else{console.log("ERROR55");return false}}},isExpExp:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if(s==="^"){return(q.length===2&&KhanUtil.isExp(q[0])&&KhanUtil.isNumber(q[1])&&(KhanUtil.isBaseNum(q[0])||KhanUtil.isInt(q[1])))}else{return false}}else{console.log("ERROR55");return false}}},isSimpleLine:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if(s==="="){return(q.length===2&&KhanUtil.isY(q[0])&&KhanUtil.isSimpleVar(q[1],"x"))}else{return false}}else{console.log("ERROR55");return false}}},isSimpleVar:function(s,r){if(KhanUtil.isNumber(s)){return true}else{if(typeof s==="object"){var t=s[0],q=s.slice(1);if((t==="+")||(t==="-")||(t==="*")){if(q.length===2&&KhanUtil.isSimpleVar(q[0],r)&&KhanUtil.isSimpleVar(q[1],r)){return true}else{return((t==="-")&&q.length===1&&KhanUtil.isSimpleVar(q[0],r))}}else{if((t==="/")){return(q.length===2&&KhanUtil.isSimpleVar(q[0],r)&&KhanUtil.isNumber(q[1])&&KhanUtil.evalExpr(q[1])!==0)}else{if((t==="^")){return(q.length===2&&KhanUtil.isSimpleVar(q[0],r)&&KhanUtil.isInt(q[1])&&KhanUtil.evalExpr(q[1])>=0)}else{if(t==="var"){return(q.length===1&&q[0]===r)}else{return false}}}}}else{console.log("ERROR55");return false}}},isUniformVar:function(r){var s={};s.isUniformHelper=KhanUtil.isUniformHelper;var q=s.isUniformHelper(r);return q},isSameVar:function(r){var s={};s.isUniformHelper=KhanUtil.isSameHelper;var q=s.isUniformHelper(r);return q},isMVar:function(r){var s={};s.isUniformHelper=KhanUtil.isMHelper;var q=s.isUniformHelper(r);return q},isMFVar:function(r){var s={};s.isUniformHelper=KhanUtil.isMFHelper;var q=s.isUniformHelper(r);return q},isXVar:function(r){var s={};s.isUniformHelper=KhanUtil.isXHelper;s.helperVar="x";var q=s.isUniformHelper(r);return q},isYVar:function(r){var s={};s.isUniformHelper=KhanUtil.isXHelper;s.helperVar="y";var q=s.isUniformHelper(r);return q},isUniformVarInt:function(s,r){var t={};t.isUniformHelper=KhanUtil.isUniformHelperInt;if(typeof r!=="undefined"){t.thisvar=r}var q=t.isUniformHelper(s);return q},isUniformVarIntEq:function(s,r){var t={};t.isUniformHelper=KhanUtil.isUniformHelperIntEq;if(typeof r!=="undefined"){t.thisvar=r}var q=t.isUniformHelper(s);return q},isUniformVarEq:function(s,r){var t={};t.isUniformHelper=KhanUtil.isUniformHelperEq;if(typeof r!=="undefined"){t.thisvar=r}var q=t.isUniformHelper(s);return q},isUniformVarIneq:function(s,r){var t={};t.isUniformHelper=KhanUtil.isUniformHelperIneq;if(typeof r!=="undefined"){t.thisvar=r}var q=t.isUniformHelper(s);return q},getUniformVarEq:function(s,r){var t={};t.isUniformHelper=KhanUtil.isUniformHelperEq;if(typeof r!=="undefined"){t.thisvar=r}var q=t.isUniformHelper(s);return t.thisvar},getUniformVarIneq:function(s,r){var t={};t.isUniformHelper=KhanUtil.isUniformHelperIneq;if(typeof r!=="undefined"){t.thisvar=r}var q=t.isUniformHelper(s);return t.thisvar},isGUniformVarEq:function(s,r){var t={};t.isUniformHelper=KhanUtil.isGUniformHelperEq;if(typeof r!=="undefined"){t.thisvar=r}var q=t.isUniformHelper(s);return q},getGUniformVarEq:function(s,r){var t={};t.isUniformHelper=KhanUtil.isGUniformHelperEq;if(typeof r!=="undefined"){t.thisvar=r}var q=t.isUniformHelper(s);return t.thisvar},getGVarEq:function(q){var r={};r.isHelper=KhanUtil.isGHelperEq;r.thisvars=[];r.isHelper(q);return r.thisvars},getUniformVarIntEq:function(s,r){var t={};t.isUniformHelper=KhanUtil.isUniformHelperIntEq;if(typeof r!=="undefined"){t.thisvar=r}var q=t.isUniformHelper(s);return t.thisvar},isUniformInt:function(r){var s={};s.isUniformHelper=KhanUtil.isUniformHelperInt;s.thisvar="NONE";var q=s.isUniformHelper(r);return q},isXHelper:function(r){if(KhanUtil.isNumber(r)){return true}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if((s==="+")||(s==="-")||(s==="*")){if(q.length===2&&this.isUniformHelper(q[0])&&this.isUniformHelper(q[1])){return true}else{return((s==="-")&&q.length===1&&this.isUniformHelper(q[0]))}}else{if((s==="/")){return(q.length===2&&this.isUniformHelper(q[0])&&this.isUniformHelper(q[1]))}else{if((s==="^")){return(q.length===2&&this.isUniformHelper(q[0])&&this.isUniformHelper(q[1]))}else{if(s==="var"&&q.length===1){return q[0]===this.helperVar}else{if(s==="sqrt"){return(q.length===1&&this.isUniformHelper(q[0]))}else{if(s==="sin"){return(q.length===1&&this.isUniformHelper(q[0]))}else{if(s==="cos"){return(q.length===1&&this.isUniformHelper(q[0]))}else{if(s==="tan"){return(q.length===1&&this.isUniformHelper(q[0]))}else{if(s==="ln"){return(q.length===1&&this.isUniformHelper(q[0]))}else{if(s==="log"){return(q.length===1&&this.isUniformHelper(q[0]))}else{if(s==="abs"){return(q.length===1&&this.isUniformHelper(q[0]))}else{if(s==="E"){return true}else{if(s==="PI"){return true}else{return true}}}}}}}}}}}}}}else{console.log("ERROR55");return true}}},isUniformHelper:function(s){if(KhanUtil.isNumber(s)){return true}else{if(typeof s==="object"){var t=s[0],r=s.slice(1);if((t==="+")||(t==="-")||(t==="*")){if(r.length===2&&this.isUniformHelper(r[0])&&this.isUniformHelper(r[1])){return true}else{if(t==="+"&&r.length>2){for(var q=0;q<r.length;q++){if(!this.isUniformHelper(r[q])){return false}}return true}else{return((t==="-")&&r.length===1&&this.isUniformHelper(r[0]))}}}else{if((t==="/")){return(r.length===2&&this.isUniformHelper(r[0])&&KhanUtil.isNumber(r[1])&&KhanUtil.evalExpr(r[1])!==0)}else{if((t==="^")){return(r.length===2&&this.isUniformHelper(r[0])&&KhanUtil.isInt(r[1])&&KhanUtil.evalExpr(r[1])>=0)}else{if(t==="var"&&r.length===1){if(typeof this.thisvar==="undefined"){this.thisvar=r[0];return true}else{if(this.thisvar===r[0]){return true}else{return false}}}else{return false}}}}}else{console.log("ERROR55");return false}}},isSameHelper:function(r){if(KhanUtil.isNumber(r)){return true}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if(s==="var"&&q.length===1){if(typeof this.thisvar==="undefined"){this.thisvar=q[0];return true}else{if(this.thisvar===q[0]){return true}else{return false}}}else{if(q.length===1){return this.isUniformHelper(q[0])}else{if(q.length===2){return this.isUniformHelper(q[0])&&this.isUniformHelper(q[1])}}}}else{console.log("ERROR55");return false}}},isMHelper:function(s){if(KhanUtil.isNumber(s)){return true}else{if(typeof s==="object"){var t=s[0],r=s.slice(1);if((t==="+")||(t==="-")||(t==="*")){if(r.length===2&&this.isUniformHelper(r[0])&&this.isUniformHelper(r[1])){return true}else{if(t==="+"&&r.length>2){for(var q=0;q<r.length;q++){if(!this.isUniformHelper(r[q])){return false}}return true}else{return((t==="-")&&r.length===1&&this.isUniformHelper(r[0]))}}}else{if((t==="/")){return(r.length===2&&this.isUniformHelper(r[0])&&KhanUtil.isNumber(r[1])&&KhanUtil.evalExpr(r[1])!==0)}else{if((t==="^")){return(r.length===2&&this.isUniformHelper(r[0])&&KhanUtil.isInt(r[1])&&KhanUtil.evalExpr(r[1])>=0)}else{if(t==="var"&&r.length===1){return true}else{return false}}}}}else{console.log("ERROR55");return false}}},isMFHelper:function(s){if(KhanUtil.isNumber(s)){return true}else{if(typeof s==="object"){var t=s[0],r=s.slice(1);if((t==="+")||(t==="-")||(t==="*")){if(r.length===2&&this.isUniformHelper(r[0])&&this.isUniformHelper(r[1])){return true}else{if(t==="+"&&r.length>2){for(var q=0;q<r.length;q++){if(!this.isUniformHelper(r[q])){return false}}return true}else{return((t==="-")&&r.length===1&&this.isUniformHelper(r[0]))}}}else{if((t==="/")){return(r.length===2&&this.isUniformHelper(r[0])&&this.isUniformHelper(r[1]))}else{if((t==="^")){return(r.length===2&&this.isUniformHelper(r[0])&&KhanUtil.isNumber(r[1])&&KhanUtil.isInt(KhanUtil.evalExpr(r[1])))}else{if(t==="var"&&r.length===1){return true}else{return false}}}}}else{console.log("ERROR55");return false}}},isUniformHelperEq:function(r){if(KhanUtil.isNumber(r)){return true}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if((s==="+")||(s==="-")||(s==="*")||(s==="=")){if(q.length===2&&this.isUniformHelper(q[0])&&this.isUniformHelper(q[1])){return true}else{return((s==="-")&&q.length===1&&this.isUniformHelper(q[0]))}}else{if((s==="/")){return(q.length===2&&this.isUniformHelper(q[0])&&KhanUtil.isNumber(q[1])&&KhanUtil.evalExpr(q[1])!==0)}else{if((s==="^")){return(q.length===2&&this.isUniformHelper(q[0])&&KhanUtil.isInt(q[1])&&KhanUtil.evalExpr(q[1])>=0)}else{if(s==="var"&&q.length===1){if(typeof this.thisvar==="undefined"){this.thisvar=q[0];return true}else{if(this.thisvar===q[0]){return true}else{return false}}}else{return false}}}}}else{console.log("ERROR55");return false}}},isUniformHelperIneq:function(r){if(KhanUtil.isNumber(r)){return true}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if($s.inArray(s,["+","-","*","=",">","<",">=","<="])>=0){if(q.length===2&&this.isUniformHelper(q[0])&&this.isUniformHelper(q[1])){return true}else{return((s==="-")&&q.length===1&&this.isUniformHelper(q[0]))}}else{if((s==="/")){return(q.length===2&&this.isUniformHelper(q[0])&&KhanUtil.isNumber(q[1])&&KhanUtil.evalExpr(q[1])!==0)}else{if((s==="^")){return(q.length===2&&this.isUniformHelper(q[0])&&KhanUtil.isInt(q[1])&&KhanUtil.evalExpr(q[1])>=0)}else{if(s==="var"&&q.length===1){if(typeof this.thisvar==="undefined"){this.thisvar=q[0];return true}else{if(this.thisvar===q[0]){return true}else{return false}}}else{return false}}}}}else{console.log("ERROR55");return false}}},isGUniformHelperEq:function(r){if(KhanUtil.isNumber(r)){return true}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if(s==="var"&&q.length===1){if(typeof this.thisvar==="undefined"){this.thisvar=q[0];return true}else{if(this.thisvar===q[0]){return true}else{return false}}}else{if(q.length===2&&this.isUniformHelper(q[0])&&this.isUniformHelper(q[1])){return true}else{if(q.length===1&&this.isUniformHelper(q[0])){return true}else{return false}}}}else{console.log("ERROR55");return false}}},isGHelperEq:function(r){if(KhanUtil.isNumber(r)){return true}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if(s==="var"&&q.length===1){if($s.inArray(q[0],this.thisvars)<0){this.thisvars.push(q[0])}return true}else{if(q.length===2){this.isHelper(q[0]);this.isHelper(q[1]);return true}else{if(q.length===1){this.isHelper(q[0]);return true}else{return false}}}}else{console.log("ERROR55");return false}}},isUniformHelperInt:function(r){if(KhanUtil.isNumber(r)){return KhanUtil.isInt(KhanUtil.evalExpr(r))}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if((s==="+")||(s==="-")||(s==="*")){if(q.length===2&&this.isUniformHelper(q[0])&&this.isUniformHelper(q[1])){return true}else{if(s==="-"){return((s==="-")&&q.length===1&&this.isUniformHelper(q[0]))}else{if(s==="+"){return((s==="+")&&q.length===3&&this.isUniformHelper(q[0])&&this.isUniformHelper(q[1])&&this.isUniformHelper(q[2]))}else{return false}}}}else{if((s==="/")){return false}else{if((s==="^")){return(q.length===2&&this.isUniformHelper(q[0])&&KhanUtil.isInt(q[1])&&KhanUtil.evalExpr(q[1])>=0)}else{if(s==="var"&&q.length===1){if(typeof this.thisvar==="undefined"){this.thisvar=q[0];return true}else{if(this.thisvar===q[0]){return true}else{return false}}}else{return false}}}}}else{console.log("ERROR55");return false}}},isUniformHelperIntEq:function(r){if(KhanUtil.isNumber(r)){return KhanUtil.isInt(KhanUtil.evalExpr(r))}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if((s==="+")||(s==="-")||(s==="*")||(s==="=")){if(q.length===2&&this.isUniformHelper(q[0])&&this.isUniformHelper(q[1])){return true}else{if(s==="-"){return((s==="-")&&q.length===1&&this.isUniformHelper(q[0]))}else{if(s==="+"){return((s==="+")&&q.length===3&&this.isUniformHelper(q[0])&&this.isUniformHelper(q[1])&&this.isUniformHelper(q[2]))}else{return false}}}}else{if((s==="/")){return false}else{if((s==="^")){return(q.length===2&&this.isUniformHelper(q[0])&&KhanUtil.isInt(q[1])&&KhanUtil.evalExpr(q[1])>=0)}else{if(s==="var"&&q.length===1){if(typeof this.thisvar==="undefined"){this.thisvar=q[0];return true}else{if(this.thisvar===q[0]){return true}else{return false}}}else{return false}}}}}else{console.log("ERROR55");return false}}},isLinEq:function(q){return(KhanUtil.isEq(q)&&KhanUtil.ansLeftIsY(q)&&KhanUtil.ansRightGood(q)&&KhanUtil.ansRightPoly(q).findMaxDegree()<=1&&KhanUtil.ansLeftPoly(q).findMaxDegree()==1)},isSPolynomial:function(q){return(KhanUtil.isEq(q)&&KhanUtil.ansLeftIsY(q)&&KhanUtil.ansRightGood(q)&&KhanUtil.ansLeftPoly(q).findMaxDegree()==1)},isPolynomial:function(q){return(KhanUtil.isEq(q)&&KhanUtil.ansleftLinY(q)&&KhanUtil.ansRightGood(q)&&KhanUtil.ansLeftPoly(q).findMaxDegree()==1)},isyxEq:function(q){return(KhanUtil.isEq(q)&&KhanUtil.ansLeftIsY(q)&&KhanUtil.isXVar(q[2]))},isyxIneq:function(q){return(KhanUtil.isIneq(q)&&KhanUtil.ansLeftIsY(q)&&KhanUtil.isXVar(q[2]))},isNumEq:function(q){return(KhanUtil.isEq(q)&&!m(q))},isNumIneq:function(q){return(KhanUtil.isIneq(q)&&!m(q))},isXPolyEq:function(q){return(KhanUtil.isEq(q)&&KhanUtil.isUniformVarInt(q[1])&&KhanUtil.isUniformVarInt(q[2]))},isMPolyEq:function(q){return(KhanUtil.isEq(q)&&KhanUtil.isMVar(q[1])&&KhanUtil.isMVar(q[2]))},isMFPolyEq:function(q){return(KhanUtil.isEq(q)&&KhanUtil.isMFVar(q[1])&&KhanUtil.isMFVar(q[2]))},isMPolyIneq:function(q){return(KhanUtil.isIneq(q)&&KhanUtil.isMVar(q[1])&&KhanUtil.isMVar(q[2]))},isMFPolyIneq:function(q){return(KhanUtil.isIneq(q)&&KhanUtil.isMFVar(q[1])&&KhanUtil.isMFVar(q[2]))},isVarLinEq:function(q){return(KhanUtil.isEq(q)&&KhanUtil.isUniformVarEq(q)&&KhanUtil.isUniformVar(q[1])&&KhanUtil.isUniformVar(q[2])&&KhanUtil.ansLeftPoly(q).findMaxDegree()<=1&&KhanUtil.ansRightPoly(q).findMaxDegree()<=1)},isVarLinIneq:function(q){return(KhanUtil.isIneq(q)&&KhanUtil.isUniformVarIneq(q)&&KhanUtil.isUniformVar(q[1])&&KhanUtil.isUniformVar(q[2])&&KhanUtil.ansLeftPoly(q).findMaxDegree()<=1&&KhanUtil.ansRightPoly(q).findMaxDegree()<=1)},isNumCompoundIneq:function(q){return(KhanUtil.isCompound(q)&&KhanUtil.isIneq(q[1])&&KhanUtil.isGeneralNumber(q[1][1])&&KhanUtil.isGeneralNumber(q[1][2])&&KhanUtil.isGeneralNumber(q[3]))},isVarLinCompoundIneq:function(q){return(KhanUtil.isCompound(q)&&KhanUtil.isIneq(q[1])&&KhanUtil.isGeneralNumber(q[1][1])&&KhanUtil.isUniformVar(q[1][2])&&KhanUtil.exprToPoly(q[1][2]).findMaxDegree()<=1&&KhanUtil.isGeneralNumber(q[3]))},isVarQuadEq:function(q){return(KhanUtil.isEq(q)&&KhanUtil.isUniformVarEq(q)&&KhanUtil.isUniformVar(q[1])&&KhanUtil.isUniformVar(q[2])&&KhanUtil.ansLeftPoly(q).findMaxDegree()<=2&&KhanUtil.ansRightPoly(q).findMaxDegree()<=2)},isVarPolyEq:function(q){return(KhanUtil.isEq(q)&&KhanUtil.isUniformVarInt(q[1])&&KhanUtil.isUniformVarInt(q[2]))},isxEq:function(q){return(KhanUtil.isEq(q)&&KhanUtil.ansLeftIsX(q)&&KhanUtil.isYVar(q[2]))},isxIneq:function(q){return(KhanUtil.isIneq(q)&&KhanUtil.ansLeftIsX(q)&&KhanUtil.isYVar(q[2]))},isGraphEq:function(q){return KhanUtil.isPolynomial(q)||KhanUtil.isyxEq(q)||KhanUtil.isxEq(q)},isGenGraph:function(q){return KhanUtil.isGraphEq(q)||KhanUtil.isPoint(q)||KhanUtil.isyxIneq(q)||KhanUtil.isxIneq(q)},getPolys:function(r){var q=[];if(typeof r==="object"){var t=r[0],s=r.slice(1);if(t===";"&&s.length===2){q=KhanUtil.getPolys(s[0]);q.push(s[1])}else{q=[r]}}return q},getEvals:function(q){var s=[];if(typeof q==="object"){var t=q[0],r=q.slice(1);if(t===","){if(r.length===2){s=s.concat(KhanUtil.getEvals(r[0]));s=s.concat(KhanUtil.getEvals(r[1]))}else{s=[""]}}else{s=[q]}}else{s=[q]}return s},getVeqs:function(q){var s=[];if(typeof q==="object"){var t=q[0],r=q.slice(1);if(t===";"){if(r.length===2){s=s.concat(KhanUtil.getVeqs(r[0]));s=s.concat(KhanUtil.getVeqs(r[1]))}else{s=[""]}}else{s=[q]}}else{s=[q]}return s},isPolySet:function(q){if(typeof q.ispolyset==="undefined"){q.ispolyset=false;if(typeof q==="object"){var s=q[0],r=q.slice(1);if(s===";"&&r.length===2){q.ispolyset=KhanUtil.isPolySet(r[0])&&KhanUtil.isSPolynomial(r[1])}else{q.ispolyset=KhanUtil.isSPolynomial(q)}}}return q.ispolyset},isGraphSet:function(q){if(typeof q.isgraphset==="undefined"){q.isgraphset=false;if(typeof q==="object"){var s=q[0],r=q.slice(1);if(s===";"&&r.length===2){q.isgraphset=KhanUtil.isGraphSet(r[0])&&KhanUtil.isGenGraph(r[1])}else{q.isgraphset=KhanUtil.isGenGraph(q)}}}return q.isgraphset},isNumEqSet:function(q){if(typeof q.isnumeqset==="undefined"){q.isnumeqset=false;if(typeof q==="object"){var s=q[0],r=q.slice(1);if(s===";"&&r.length===2){q.isnumeqset=KhanUtil.isNumEqSet(r[0])&&KhanUtil.isNumEq(r[1])}else{q.isnumeqset=KhanUtil.isNumEq(q)}}}return q.isnumeqset},isNumberSet:function(q){if(typeof q.isnumberset==="undefined"){q.isnumberset=false;if(typeof q==="object"){var s=q[0],r=q.slice(1);if(s===";"&&r.length===2){q.isnumberset=true}else{q.isnumberset=false}}}return q.isnumberset},isXPolyEqSet:function(q){if(typeof q.isxpolyeqset==="undefined"){q.isxpolyeqset=false;if(typeof q==="object"){var s=q[0],r=q.slice(1);if(s===";"&&r.length===2){q.isxpolyeqset=KhanUtil.isXPolyEqSet(r[0])&&KhanUtil.isXPolyEq(r[1])}else{q.isxpolyeqset=KhanUtil.isXPolyEq(q)}}}return q.isxpolyeqset},isStandardEq:function(r){if(KhanUtil.isMPolyEq(r)){var q=KhanUtil.getCarrayEqs([r]);if(q.length===2){var w=parseInt(q[0].slice(1));var v=q[0][0];var u=parseInt(q[1].slice(1));var s=q[1][0];var t=[v,s];if(w===1&&u===1&&$s.inArray("x",t)>=0&&$s.inArray("y",t)>=0){return true}}}return false},isStandardIneq:function(r){if(KhanUtil.isMPolyIneq(r)){var q=KhanUtil.getCarrayEqs([r]);if(q.length===2){var w=parseInt(q[0].slice(1));var v=q[0][0];var u=parseInt(q[1].slice(1));var s=q[1][0];var t=[v,s];if(w===1&&u===1&&$s.inArray("x",t)>=0&&$s.inArray("y",t)>=0){return true}}}return false},isSimpleSystem:function(q){if(typeof q==="object"){var s=q[0],r=q.slice(1);if((s===";"||s==="and")&&r.length===2){return KhanUtil.isHandleEq(r[0])&&KhanUtil.isHandleEq(r[1])&&KhanUtil.isLinearCheck(r[0],r[1])}else{return false}}return false},isHandleEq:function(q){return KhanUtil.isMPolyEq(q)&&!KhanUtil.isDegenEq(q)},isDegenEq:function(q){var r=KhanUtil.exprToMPoly(["-",q[1],q[2]]);if(KhanUtil.getCarraySides([r.polyToExpr()]).length===0){return true}return false},getCarrayEqs:function(r){var t=[];for(var s=0;s<r.length;s++){var q=r[s];t.push(q[1]);t.push(q[2])}return KhanUtil.getCarraySides(t)},getCarraySides:function(u){var r=[];for(var t=0;t<u.length;t++){var s=u[t];var q=KhanUtil.exprToMPoly(s).coefs;for(var v in q){if(v!=="0"&&$s.inArray(v,r)<0){r.push(v)}}}return r},isLinearCheck:function(s,r){var q=KhanUtil.getCarrayEqs([s,r]);if(q.length===2){if(q[0].indexOf(",")===-1&&q[1].indexOf(",")===-1){var u=parseInt(q[0].slice(1));var t=parseInt(q[1].slice(1));if(u===1&&t===1){return true}}}return false},isVeqSet:function(q){if(typeof q.isveqset==="undefined"){q.isveqset=false;if(typeof q==="object"){var s=q[0],r=q.slice(1);if(s===";"&&r.length===2){q.isveqset=KhanUtil.isVeqSet(r[0])&&KhanUtil.isVeq(r[1])}else{q.isveqset=KhanUtil.isVeq(q)}}}return q.isveqset},isVeq:function(q){if(typeof q.isveq==="undefined"){q.isveq=false;if(typeof q==="object"){var s=q[0],r=q.slice(1);if(s==="="&&r.length===2){q.isveq=true}}}return q.isveq},isSetExpr:function(q){if(typeof q.issetexpr==="undefined"){q.issetexpr=false;if(typeof q==="object"){var s=q[0],r=q.slice(1);if(s===";"&&r.length===2){q.issetexpr=true}else{q.issetexpr=false}}}return q.issetexpr},isMPolyEqSet:function(q){if(typeof q.ismpolyeqset==="undefined"){q.ismpolyeqset=false;if(typeof q==="object"){var s=q[0],r=q.slice(1);if(s===";"&&r.length===2){q.ismpolyeqset=KhanUtil.isMPolyEqSet(r[0])&&KhanUtil.isMPolyEq(r[1])}else{q.ismpolyeqset=KhanUtil.isMPolyEq(q)}}}return q.ismpolyeqset},isEq:function(q){if(typeof q.iseq==="undefined"){q.iseq=false;if(typeof q==="object"){var s=q[0],r=q.slice(1);if(s==="="&&r.length===2){q.iseq=true}}}return q.iseq},isCompound:function(q){if(typeof q==="object"){var s=q[0],r=q.slice(1);if(s==="comp"&&r.length===3){return true}}return false},isNumCompGatomIneq:function(q){if(typeof q==="object"){var s=q[0],r=q.slice(1);if(($s.inArray(s,["and","or"])>=0)&&r.length===2&&KhanUtil.isNumIneq(r[0])&&KhanUtil.isNumIneq(r[1])){return true}}return false},isNumCompGatomEq:function(q){if(typeof q==="object"){var s=q[0],r=q.slice(1);if(($s.inArray(s,["and","or"])>=0)&&r.length===2&&KhanUtil.isNumEq(r[0])&&KhanUtil.isNumEq(r[1])){return true}}return false},isVarLinCompGatomIneq:function(q){if(typeof q==="object"){var s=q[0],r=q.slice(1);if(($s.inArray(s,["and","or"])>=0)&&r.length===2&&KhanUtil.isVarLinIneq(r[0])&&KhanUtil.isVarLinIneq(r[1])){return true}}return false},isIneq:function(q){if(typeof q.isineq==="undefined"){q.isineq=false;if(typeof q==="object"){var s=q[0],r=q.slice(1);if(($s.inArray(s,[">","<",">=","<="])>=0)&&r.length===2){q.isineq=true}}}return q.isineq},isPoint:function(q){if(typeof q.ispoint==="undefined"){q.ispoint=false;if(typeof q==="object"){var s=q[0],r=q.slice(1);if(s==="pt"&&r.length===2){q.ispoint=(!m(r[0])&&!m(r[1]))}}}return q.ispoint},ansLeftIsY:function(q){if(typeof q.leftisy==="undefined"){q.leftisy=false;if(typeof q==="object"){var s=q[0],r=q.slice(1);if($s.inArray(s,["=",">","<",">=","<="])>=0&&r.length===2){q.leftisy=KhanUtil.isY(r[0])}}}return q.leftisy},ansLeftIsX:function(q){if(typeof q.leftisx==="undefined"){q.leftisx=false;if(typeof q==="object"){var s=q[0],r=q.slice(1);if($s.inArray(s,["=",">","<",">=","<="])>=0&&r.length===2){q.leftisx=KhanUtil.isX(r[0])}}}return q.leftisx},ansLeftPoly:function(q){if(typeof q.leftpoly==="undefined"){q.leftpoly={};if(typeof q==="object"){var s=q[0],r=q.slice(1);if($s.inArray(s,["=",">","<",">=","<="])>=0&&r.length===2){q.leftpoly=KhanUtil.exprToPoly(r[0])}}}return q.leftpoly},ansRightPoly:function(q){if(typeof q.rightpoly==="undefined"){q.rightpoly={};if(typeof q==="object"){var s=q[0],r=q.slice(1);if($s.inArray(s,["=",">","<",">=","<="])>=0&&r.length===2){q.rightpoly=KhanUtil.exprToPoly(r[1])}}}return q.rightpoly},ansleftLinY:function(q){if(typeof q.leftliny==="undefined"){q.leftliny=false;if(KhanUtil.ansLeftIsY(q)){q.leftliny=true}else{if(typeof q==="object"){var s=q[0],r=q.slice(1);if($s.inArray(s,["=",">","<",">=","<="])>=0&&r.length===2){q.leftliny=KhanUtil.isSimpleVar(r[0],"y")&&m(r[0])}}}}return q.leftliny},ansRightGood:function(q){if(typeof q.rightgood==="undefined"){q.rightgood=false;if(typeof q==="object"){var s=q[0],r=q.slice(1);if($s.inArray(s,["=",">","<",">=","<="])>=0&&r.length===2){q.rightgood=KhanUtil.isSimpleVar(r[1],"x")}}}return q.rightgood},isY:function(r){if(typeof r.isy==="undefined"){if(typeof r==="number"){r.isy=false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if(s==="var"){r.isy=(q.length===1&&q[0]==="y")}else{r.isy=false}}else{console.log("ERROR55");r.isy=false}}}return r.isy},isX:function(r){if(typeof r.isx==="undefined"){if(typeof r==="number"){r.isx=false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if(s==="var"){r.isx=(q.length===1&&q[0]==="x")}else{r.isx=false}}else{console.log("ERROR55");r.isx=false}}}return r.isx},getSimpleArgs:function(t){if(typeof t==="number"){return false}else{if(typeof t==="object"){var u=t[0],s=t.slice(1);if((u==="+")||(u==="-")){if(s.length===2&&KhanUtil.isNumber(s[0])&&KhanUtil.isNumber(s[1])){var r=KhanUtil.evalExpr(s[0]);var q=KhanUtil.evalExpr(s[1]);return[r,q]}else{var r=KhanUtil.evalExpr(s[0]);var q=KhanUtil.evalExpr(s[1]);return[r,q]}}else{var r=KhanUtil.evalExpr(s[0]);var q=KhanUtil.evalExpr(s[1]);return[r,q]}}else{console.log("ERROR55");return false}}},getFracs:function(t){if(typeof t==="number"){return false}else{if(typeof t==="object"){var u=t[0],s=t.slice(1);if((u==="+")||(u==="-")){if(s.length===2&&KhanUtil.isFrac(s[0])&&KhanUtil.isFrac(s[1])){var r=s[0];var q=s[1];return{a0:r,a1:q,op:u}}else{return false}}else{return false}}else{console.log("ERROR55");return false}}},evalAtVal:function(t,u,s){if(typeof t==="object"){var v=t[0],r=t.slice(1);if(v==="var"){if(typeof s==="undefined"){return u}else{if(r[0]===s){return u}else{return t}}}else{var q=[];q.push(v);$s.each(r,function(x,w){var y=KhanUtil.evalAtVal(w,u,s);q.push(y)});return q}}else{return t}},removeColor:function(s){if(typeof s==="object"){var t=s[0],r=s.slice(1);if(t==="color"){if(r.length===2){return r[1]}else{return s}}else{var q=[];q.push(t);$s.each(r,function(v,u){var w=KhanUtil.removeColor(u);q.push(w)});return q}}else{return s}},containsAbs:function(s){var q=false;if(typeof s==="object"){var t=s[0],r=s.slice(1);if(t==="abs"){q=true}else{$s.each(r,function(v,u){var w=KhanUtil.containsAbs(u);q=q||w})}}return q},isAbsVar:function(q){return(m(q)&&KhanUtil.containsAbs(q))},isSimpleVarFracEq:function(q){return(KhanUtil.isEq(q)&&m(q)&&KhanUtil.isSameVar(q)&&(typeof q[1]==="object")&&(typeof q[2]==="object")&&(q[1][0]=="/")&&(q[2][0]=="/")&&((KhanUtil.isGeneralLinFrac(q[1])&&KhanUtil.isGeneralLinFrac(q[2]))||(KhanUtil.isGeneralQLinFrac(q[1])&&KhanUtil.isGeneralLin(q[2]))))},isGeneralLin:function(q){return KhanUtil.isUniformVar(q)&&KhanUtil.exprToPoly(q).findMaxDegree()<=1},isGeneralQuad:function(q){return KhanUtil.isUniformVar(q)&&KhanUtil.exprToPoly(q).findMaxDegree()<=2},isGeneralQLinFrac:function(r){if(typeof r==="number"){return true}else{if(KhanUtil.isGeneralLin(r)){return true}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if((s==="/")){return(q.length===2&&KhanUtil.isGeneralQuad(q[0])&&KhanUtil.isGeneralLin(q[1]))}else{return false}}else{console.log("ERROR55");return false}}}},isGeneralLinFrac:function(r){if(typeof r==="number"){return true}else{if(KhanUtil.isGeneralLin(r)){return true}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if((s==="/")){return(q.length===2&&KhanUtil.isGeneralLin(q[0])&&KhanUtil.isGeneralLin(q[1]))}else{return false}}else{console.log("ERROR55");return false}}}},isSimpleAbsVarEq:function(q){return(KhanUtil.isEq(q)&&(KhanUtil.isGeneralAddAbsVar(q[1])||KhanUtil.isGenMultAbsVar(q[1]))&&KhanUtil.isGeneralNumber(q[2]))},isSimpleAbsVarIneq:function(q){return(KhanUtil.isIneq(q)&&(KhanUtil.isGeneralAddAbsVar(q[1])||KhanUtil.isGenMultAbsVar(q[1]))&&KhanUtil.isGeneralNumber(q[2]))},isGeneralNumber:function(q){return KhanUtil.isSimpleVar(q,"none")&&!m(q)},isGeneralNonzeroNumber:function(q){return KhanUtil.isSimpleVar(q,"none")&&!m(q)&&KhanUtil.evalExpr(q)!==0},isGeneralAddAbsVar:function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if((s==="+")){return(q.length===2&&((KhanUtil.isGenMultAbsVar(q[0])&&KhanUtil.isGeneralNumber(q[1]))||(KhanUtil.isGenMultAbsVar(q[1])&&KhanUtil.isGeneralNumber(q[0]))))}else{if((s==="-")){return(q.length===2&&(KhanUtil.isGenMultAbsVar(q[0])&&KhanUtil.isGeneralNumber(q[1])))}else{return false}}}else{console.log("ERROR55");return false}}},isGenMultAbsVar:function(q){return(KhanUtil.isSimpleAbsVar(q)||KhanUtil.isMultAbsVar(q)||KhanUtil.isDivAbsVar(q))},isSimpleAbsVar:function(s){var q=false;if(typeof s==="object"){var t=s[0],r=s.slice(1);if(t==="abs"){q=KhanUtil.isUniformVar(r[0])&&KhanUtil.exprToPoly(r[0]).findMaxDegree()<=1}else{q=false}}return q},isMultAbsVar:function(s){var q=false;if(typeof s==="object"){var t=s[0],r=s.slice(1);if(t==="*"){q=(KhanUtil.isGeneralNonzeroNumber(r[0])&&KhanUtil.isSimpleAbsVar(r[1]))||(KhanUtil.isGeneralNonzeroNumber(r[1])&&KhanUtil.isSimpleAbsVar(r[0]))}else{q=false}}return q},isDivAbsVar:function(s){var q=false;if(typeof s==="object"){var t=s[0],r=s.slice(1);if(t==="/"){q=(KhanUtil.isGeneralNonzeroNumber(r[1])&&KhanUtil.isSimpleAbsVar(r[0]))}else{q=false}}return q},exprType:function(q){return(typeof q==="object")?q[0]:typeof(q)},myExprType:function(q){return(typeof q==="object")?((q[0]==="color")?KhanUtil.myExprType(q[2]):q[0]):typeof(q)},exprIsNegated:function(q){switch(KhanUtil.exprType(q)){case"color":return KhanUtil.exprIsNegated(q[2]);case"/":return KhanUtil.exprIsNegated(q[1]);case"+":case"-":return true;case"number":return q<0;case"string":return q.charAt(0)==="-";default:return false}},exprIsShort:function(q){switch(KhanUtil.exprType(q)){case"color":return KhanUtil.exprIsShort(q[2]);case"+":case"-":case"*":case"/":case"frac":case"dfrac":return false;case"^":return KhanUtil.exprType(q[1])!=="number"||q[1]<0;case"number":case"sqrt":return true;default:return q.length<=1}},myExprIsShort:function(q){switch(KhanUtil.exprType(q)){case"color":return KhanUtil.myExprIsShort(q[2]);case"+":case"-":case"/":case"frac":case"dfrac":return false;case"^":return KhanUtil.myExprType(q[1])!=="number"||q[1]<0;case"number":return KhanUtil.evalExpr(q)>=0;case"*":return!KhanUtil.prodNeg(q);case"var":case"sqrt":return true;default:return q.length<=1}},myExprIsShortDiv:function(q){switch(KhanUtil.exprType(q)){case"color":return KhanUtil.myExprIsShortDiv(q[2]);case"+":case"-":case"/":case"frac":case"dfrac":case"*":return false;case"^":return KhanUtil.exprType(q[1])!=="number"||q[1]<0;case"number":return KhanUtil.evalExpr(q)>=0;case"var":case"sqrt":return true;default:return q.length<=1}},exprParenthesize:function(q){return KhanUtil.exprIsShort(q)?KhanUtil.expr(q):"("+KhanUtil.expr(q)+")"},myexprParenthesize:function(q){return KhanUtil.myExprIsShort(q)?this.myexpr(q):this.myMakeParen(q)},myexprParenthesizeOld:function(q){return KhanUtil.exprIsShort(q)?this.myexpr(q):"("+this.myexpr(q)+")"},myMakeParen:function(q){return(KhanUtil.myExprType(q)==="dfrac")?"("+this.myexpr(q)+")":"("+this.myexpr(q)+")"},myOptParen:function(r,q){return q?this.myMakeParen(r):this.myexpr(r)},myParenBase:function(s){var r;var q;switch(KhanUtil.myExprType(s)){case"+":case"-":case"*":case"/":case"^":case"ln":case"dfrac":r=true;break;case"number":r=KhanUtil.evalExpr(s)<0;break;case"color":r=KhanUtil.myParenBase(s[2]);break;case"sin":case"cos":case"tan":case"csc":case"sec":case"cot":r=false;q=true;break;default:r=false;q=false}return[r,q]},prodNeg:function(q){var r=KhanUtil.exprToText(q);return(r.charAt(0)==="-")},myFormatOperators:{color:function(r,q){return"\\cl "+r+" {"+this.myexpr(q)+"}"},eof:function(){return""},pt:function(r,q){return"("+this.myexpr(r)+", "+this.myexpr(q)+")"},space:function(s,r){var q=KhanUtil.evalExpr(s);if(q>=0){return""+(q)+" "+this.myexpr(r)}else{return"-"+(-q)+" "+this.myexpr(r)}},"@":function(r,q){return this.myexpr(r)+"\\,\\,\\,\\,\\, \\,\\,\\,\\,\\, @\\,\\,\\,\\,\\, \\,\\,\\,\\,\\, "+this.myexpr(["color","purple",q])},"+":function(){var q=[].slice.call(arguments,0);var s=$s.grep(q,function(v,u){return v!=null});var r=this;s=$s.map(s,function(v,u){var w;switch(KhanUtil.myExprType(v)){case"-":w=(v.length>2);break;default:w=false}v=r.myexpr(v);if(w){v="("+v+")"}if(v.charAt(0)!=="-"||w){v="+"+v}return v});var t=s.join("");if(t.charAt(0)==="+"){return t.slice(1)}else{return t}},"+my":function(){var q=[].slice.call(arguments,0);var s=$s.grep(q,function(v,u){return v!=null});var r=this;s=$s.map(s,function(v,u){var w;switch(KhanUtil.myExprType(v)){case"-":w=(v.length>2);break;case"*":w=KhanUtil.prodNeg(v);break;default:w=false}v=r.myexpr(v);if(w){v="("+v+")"}if(v.charAt(0)!=="-"||w){v="+"+v}return v});var t=s.join("");if(t.charAt(0)==="+"){return t.slice(1)}else{return t}},"-":function(){var s=this;if(arguments.length===1){return this.myexpr(["*old",-1,arguments[0]])}else{var q=[].slice.call(arguments,0);var r=$s.map(q,function(v,u){var x=KhanUtil.exprIsNegated(v);var w;switch(KhanUtil.myExprType(v)){case"+":case"-":w=true;break;default:w=false}v=s.myexpr(v);if((x&&u>0)||w){v="("+v+")"}return v});var t=r.join("-");return t}},"*old":function(){var s=Array.prototype.slice.call(arguments,1);s.unshift("*");if(arguments[0]===1&&s.length>1){return this.myexpr(s)}else{if(arguments[0]===-1&&s.length>1){var u=this.myexpr(s);if(KhanUtil.exprIsNegated(s[1])){return"-("+u+")"}else{return"-"+u}}}if(arguments.length>1){var q=[].slice.call(arguments,0);var r=KhanUtil.myExprType(arguments[0])==="number"&&KhanUtil.myExprType(arguments[1])==="number";var t=this;var v=$s.map(q,function(x,w){var y;switch(KhanUtil.myExprType(x)){case"number":if(w>0){y=true}break;default:y=!KhanUtil.myExprIsShort(x);break}r||(r=y);x=t.myexpr(x);if(r){x="("+x+")"}return x});return v.join("")}else{return this.myexpr(arguments[0])}},"*":function(){var s=Array.prototype.slice.call(arguments,1);s.unshift("*");if(arguments.length>1){var q=[].slice.call(arguments,0);var r=KhanUtil.myExprType(arguments[0])==="number"&&KhanUtil.myExprType(arguments[1])==="number";var t=this;var u=$s.map(q,function(w,v){var x;switch(KhanUtil.myExprType(w)){case"number":if(v>0){x=true}break;default:x=!KhanUtil.myExprIsShort(w);break}r||(r=x);w=t.myOptParen(w,r);return w});return u.join("")}else{return this.myexpr(arguments[0])}},"*show":function(){var s=Array.prototype.slice.call(arguments,1);s.unshift("*");if(arguments.length>1){var q=[].slice.call(arguments,0);var r=KhanUtil.myExprType(arguments[0])==="number"&&KhanUtil.myExprType(arguments[1])==="number";var t=this;var u=$s.map(q,function(w,v){var x;switch(KhanUtil.myExprType(w)){case"number":if(v>0){x=true}break;default:x=!KhanUtil.myExprIsShort(w);break}r||(r=x);w=t.myOptParen(w,r);return w});return u.join(" * ")}else{return this.myexpr(arguments[0])}},times:function(s,q){var r=!KhanUtil.myExprIsShort(s);var t=!KhanUtil.myExprIsShort(q);s=this.myexpr(s);q=this.myexpr(q);s=r?"("+s+")":s;q=t?"("+q+")":q;return s+" \\times "+q},"/":function(q,t){var s=!KhanUtil.myExprIsShortDiv(q);var r=!KhanUtil.myExprIsShortDiv(t);q=this.myexpr(q);t=this.myexpr(t);q=s?"("+q+")":q;t=r?"("+t+")":t;return q+"/"+t},frac:function(q,r){return"\\frac{"+this.myexpr(q)+"}{"+this.myexpr(r)+"}"},dfrac:function(q,r){return"{"+this.myexpr(q)+"}/{"+this.myexpr(r)+"}"},"^":function(t,s){var u=KhanUtil.myParenBase(t);var r=u[0];var q=u[1];t=this.myOptParen(t,r);s=this.myexpr(s);if(q){return t.replace(/\\(\S+?)\{/,function(v,w){return"\\"+w+"^{"+s+"} {"})}else{return t+"^{"+s+"}"}},sqrt:function(q){return"\\sqrt{"+this.myexprParenthesize(q)+"}"},sin:function(q){return"\\sin{"+this.myexprParenthesizeOld(q)+"}"},cos:function(q){return"\\cos{"+this.myexprParenthesize(q)+"}"},tan:function(q){return"\\tan{"+this.myexprParenthesize(q)+"}"},sec:function(q){return"\\sec{"+this.myexprParenthesize(q)+"}"},csc:function(q){return"\\sec{"+this.myexprParenthesize(q)+"}"},cot:function(q){return"\\sec{"+this.myexprParenthesize(q)+"}"},"!":function(q){return this.myexprParenthesize(q)+"!"},ln:function(q){return"\\ln{"+this.myexprParenthesize(q)+"}"},log:function(q){return"\\log{"+this.myexprParenthesize(q)+"}"},abs:function(q){return"|"+this.myexprParenthesize(q)+"|"},"var":function(q){return q},"=":function(r,q){return this.myexpr(r)+" = "+this.myexpr(q)},">":function(r,q){return this.myexpr(r)+" > "+this.myexpr(q)},"<":function(r,q){return this.myexpr(r)+" < "+this.myexpr(q)},">=":function(r,q){return this.myexpr(r)+" \u2265 "+this.myexpr(q)},"<=":function(r,q){return this.myexpr(r)+" \u2264 "+this.myexpr(q)},comp:function(s,q,r){if(q===">"){return this.myexpr(s)+" > "+this.myexpr(r)}else{if(q==="<"){return this.myexpr(s)+" < "+this.myexpr(r)}else{if(q===">="){return this.myexpr(s)+" \u2265 "+this.myexpr(r)}else{return this.myexpr(s)+" \u2264 "+this.myexpr(r)}}}},and:function(r,q){return this.myexpr(r)+"\\,\\,\\text' and '\\,\\,"+this.myexpr(q)},or:function(r,q){return this.myexpr(r)+"\\,\\,\\text' or '\\,\\,"+this.myexpr(q)},";":function(r,q){return this.myexpr(r)+" ; "+this.myexpr(q)},",":function(r,q){if(q===undefined){return this.myexpr(r)+" , "}else{return this.myexpr(r)+" , "+this.myexpr(q)}},"+-":function(){if(arguments.length===1){return"\\pm "+this.myexprParenthesize(arguments[0])}else{var q=[].slice.call(arguments,0);var r=this;return $s.map(q,function(t,s){return r.myexpr(t)}).join(" \\pm ")}}},formatFracOperators:{"/":function(q,r){return"{"+this.myexpr(q)+"}/{"+this.myexpr(r)+"}"},},formatQeqOperators:{"=":function(r,q){return this.myexpr(r)+" {\\,=\u2196{?}\\,} "+this.myexpr(q)},},formatNeqOperators:{"=":function(t,r){var s=KhanUtil.roundPrec(this.myexpr(t));var q=KhanUtil.roundPrec(this.myexpr(r));if(s===q){return s+" \\cl green {=} "+q}else{return s+" \\cl red {\\\u2260\\,} "+q}},">":function(t,r){var s=KhanUtil.roundPrec(this.myexpr(t));var q=KhanUtil.roundPrec(this.myexpr(r));if(s>q){return s+" \\cl green {>} "+q}else{return s+" \\cl red {\\\u226f\\,} "+q}},">=":function(t,r){var s=KhanUtil.roundPrec(this.myexpr(t));var q=KhanUtil.roundPrec(this.myexpr(r));if(s>=q){return s+" \\cl green {\u2265} "+q}else{return s+" \\cl red {\\\u2271\\,} "+q}},"<":function(t,r){var s=KhanUtil.roundPrec(this.myexpr(t));var q=KhanUtil.roundPrec(this.myexpr(r));if(s<q){return s+" \\cl green {<} "+q}else{return s+" \\cl red {\\\u226e\\,} "+q}},"<=":function(t,r){var s=KhanUtil.roundPrec(this.myexpr(t));var q=KhanUtil.roundPrec(this.myexpr(r));if(s<=q){return s+" \\cl green {\u2264} "+q}else{return s+" \\cl red {\\\u2270\\,} "+q}},},formatNeqPolyOperators:{"=":function(s,q){var r=KhanUtil.evalExprPoly(["-",s,q]);if(typeof r==="number"&&Math.abs(r)<0.00001){return this.myexpr(s)+" = "+this.myexpr(q)}else{return this.myexpr(s)+" = "+this.myexpr(q)}},},computePolyOperators:{color:function(r,q){return KhanUtil.exprToPoly(q)},"+":function(){var q=[].slice.call(arguments,0);var r=k(0);$s.each(q,function(t,s){r=r.add(KhanUtil.exprToPoly(s))});return r},"-":function(){if(arguments.length===1){return k(-1).multiply(KhanUtil.exprToPoly(arguments[0]))}else{var q=[].slice.call(arguments,0);if(arguments.length===2){return KhanUtil.exprToPoly(q[0]).subtract(KhanUtil.exprToPoly(q[1]))}else{console.log("ERROR 77");return k(0)}}},"*":function(){var r=[].slice.call(arguments,0);var q=k(1);$s.each(r,function(t,s){q=q.multiply(KhanUtil.exprToPoly(s))});return q},"/":function(){var q=[].slice.call(arguments,0);if(arguments.length===2){var r=KhanUtil.evalExpr(q[1]);if(r!==0){return KhanUtil.exprToPoly(q[0]).multiply(1/r)}else{console.log("ERROR div by 0");return k(0)}}else{console.log("ERROR 78");return k(0)}},"^":function(t,s){var q=k(1);if(s<0){console.log("ERROR 789");return q}for(var r=0;r<s;r++){q=q.multiply(KhanUtil.exprToPoly(t))}return q},sqrt:function(q){return Math.sqrt(KhanUtil.exprToPoly(q))},"=":function(r,q){if(KhanUtil.exprToPoly(r)===KhanUtil.exprToPoly(q)){return 1}else{return 0}},"var":function(q){if(q==="x"){return new KhanUtil.Polynomial(0,1,[0,1],q)}else{return new KhanUtil.Polynomial(0,1,[0,1],q)}},"+-":function(){return Number.NaN}},computeMPolyOperators:{color:function(r,q){return KhanUtil.exprToMPoly(q)},"+":function(){var q=[].slice.call(arguments,0);var r=KhanUtil.mconstant(0);$s.each(q,function(t,s){r=r.add(KhanUtil.exprToMPoly(s))});return r},"-":function(){if(arguments.length===1){return KhanUtil.mconstant(-1).multiply(KhanUtil.exprToMPoly(arguments[0]))}else{var q=[].slice.call(arguments,0);if(arguments.length===2){return KhanUtil.exprToMPoly(q[0]).subtract(KhanUtil.exprToMPoly(q[1]))}else{console.log("ERROR 77");return KhanUtil.mconstant(0)}}},"*":function(){var r=[].slice.call(arguments,0);var q=KhanUtil.mconstant(1);$s.each(r,function(t,s){q=q.multiply(KhanUtil.exprToMPoly(s))});return q},"/":function(){var q=[].slice.call(arguments,0);if(arguments.length===2){var r=KhanUtil.evalExpr(q[1]);if(r!==0){return KhanUtil.exprToMPoly(q[0]).multiply(1/r)}else{console.log("ERROR div by 0");return KhanUtil.mconstant(0)}}else{console.log("ERROR 78");return KhanUtil.mconstant(0)}},"^":function(t,s){var q=KhanUtil.mconstant(1);if(s<0){console.log("ERROR 789");return q}for(var r=0;r<s;r++){q=q.multiply(KhanUtil.exprToMPoly(t))}return q},sqrt:function(q){return Math.sqrt(KhanUtil.exprToMPoly(q))},"=":function(r,q){if(KhanUtil.exprToMPoly(r)===KhanUtil.exprToMPoly(q)){return 1}else{return 0}},"var":function(r){var s=""+r+"1";var q={};q[s]=1;return new KhanUtil.MPolynomial(q)},"+-":function(){return Number.NaN}},computeMFPolyOperators:{color:function(r,q){return KhanUtil.exprToMFPoly(q)},"+":function(){var q=[].slice.call(arguments,0);var r=KhanUtil.mfconstant(0);$s.each(q,function(t,s){r=r.add(KhanUtil.exprToMFPoly(s))});return r},"-":function(){if(arguments.length===1){return KhanUtil.mfconstant(-1).multiply(KhanUtil.exprToMFPoly(arguments[0]))}else{var q=[].slice.call(arguments,0);if(arguments.length===2){return KhanUtil.exprToMFPoly(q[0]).subtract(KhanUtil.exprToMFPoly(q[1]))}else{console.log("ERROR 77");return KhanUtil.mfconstant(0)}}},"*":function(){var r=[].slice.call(arguments,0);var q=KhanUtil.mfconstant(1);$s.each(r,function(t,s){q=q.multiply(KhanUtil.exprToMFPoly(s))});return q},"/":function(){var q=[].slice.call(arguments,0);if(arguments.length===2){var r=KhanUtil.exprToMFPoly(q[1]);return KhanUtil.exprToMFPoly(q[0]).divide(r)}else{console.log("ERROR 78");return KhanUtil.mfconstant(0)}},"^":function(r,q){return KhanUtil.exprToMFPoly(r).pow(q)},sqrt:function(q){return Math.sqrt(KhanUtil.exprToMFPoly(q))},"=":function(r,q){if(KhanUtil.exprToMFPoly(r)===KhanUtil.exprToMFPoly(q)){return 1}else{return 0}},"var":function(r){var s=""+r+"1";var q={};q[s]=1;return new KhanUtil.MFPolynomial(q)},"+-":function(){return Number.NaN}},myComputeOperators:{color:function(r,q){return this.myexpr(q,true)},eof:function(){return 0},pt:function(r,q){return 0},"!":function(q){var t=[];function s(u){if(u==0||u==1){return 1}if(t[u]>0){return t[u]}if(KhanUtil.isInt(u)&&u>0){return t[u]=s(u-1)*u}else{return NaN}}var r=this.myexpr(q,true);return s(r)},"+":function(){var q=[].slice.call(arguments,0);var r=0;var s=this;$s.each(q,function(u,t){r+=s.myexpr(t,true)});return r},"-":function(){if(arguments.length===1){return-this.myexpr(arguments[0],true)}else{var q=[].slice.call(arguments,0);var r=0;var s=this;$s.each(q,function(u,t){r+=(u===0?1:-1)*s.myexpr(t,true)});return r}},"*":function(){var r=[].slice.call(arguments,0);var q=1;var s=this;$s.each(r,function(u,t){q*=s.myexpr(t,true)});return q},"/":function(){var r=[].slice.call(arguments,0);var q=1;var s=this;$s.each(r,function(u,t){var v=s.myexpr(t,true);q*=(u===0?v:1/v)});return q},space:function(s,r){var q=this.myexpr(s,true);if(q>=0){return(q+this.myexpr(r,true))}else{return(q+-1*(this.myexpr(r,true)))}},"^":function(r,q){return Math.pow(this.myexpr(r,true),this.myexpr(q,true))},sqrt:function(q){return Math.sqrt(this.myexpr(q,true))},sin:function(q){return Math.sin(this.myexpr(q,true))},cos:function(q){return Math.cos(this.myexpr(q,true))},tan:function(q){return Math.tan(this.myexpr(q,true))},ln:function(q){return Math.log(KhanUtil.expr(q,true))},log:function(q){return Math.log(KhanUtil.expr(q,true))/Math.log(10)},abs:function(q){return Math.abs(KhanUtil.expr(q,true))},"=":function(t,r){var s=KhanUtil.roundPrec(this.myexpr(t,true));var q=KhanUtil.roundPrec(this.myexpr(r,true));if(s===q){return 1}else{return 0}},">":function(t,r){var s=KhanUtil.roundPrec(this.myexpr(t,true));var q=KhanUtil.roundPrec(this.myexpr(r,true));if(s>q){return 1}else{return 0}},"<":function(t,r){var s=KhanUtil.roundPrec(this.myexpr(t,true));var q=KhanUtil.roundPrec(this.myexpr(r,true));if(s<q){return 1}else{return 0}},">=":function(t,r){var s=KhanUtil.roundPrec(this.myexpr(t,true));var q=KhanUtil.roundPrec(this.myexpr(r,true));if(s>=q){return 1}else{return 0}},"<=":function(t,r){var s=KhanUtil.roundPrec(this.myexpr(t,true));var q=KhanUtil.roundPrec(this.myexpr(r,true));if(s<=q){return 1}else{return 0}},comp:function(s,q,r){if(KhanUtil.evalExpr(s)===1&&KhanUtil.evalExpr([q,s[2],r])===1){return 1}else{return 0}},and:function(r,q){if(KhanUtil.evalExpr(r)===1&&KhanUtil.evalExpr(q)===1){return 1}else{return 0}},or:function(r,q){if(KhanUtil.evalExpr(r)===1||KhanUtil.evalExpr(q)===1){return 1}else{return 0}},";":function(r,q){if(KhanUtil.isEq(r)&&KhanUtil.isEq(q)){if(KhanUtil.evalExpr(r)===1&&KhanUtil.evalExpr(q)===1){return 1}}else{if(KhanUtil.isNumEqSet(r)&&KhanUtil.isNumEqSet(q)){if(KhanUtil.evalExpr(r)===1&&KhanUtil.evalExpr(q)===1){return 1}}}return 0},"+-":function(){return Number.NaN}},exprStripColor:function(q){if(typeof q!=="object"){return q}else{if(q[0]==="color"){return KhanUtil.exprStripColor(q[2])}else{return $s.map(q,function(s,r){return[(r===0)?s:KhanUtil.exprStripColor(s)]})}}},exprSimplifyAssociative:function(s){if(typeof s!=="object"){return s}var t=$s.map(s.slice(1),function(u){return[KhanUtil.exprSimplifyAssociative(u)]});var r=function(u){switch(s[0]){case"+":if(u[0]==="+"){return u.slice(1)}break;case"*":if(u[0]==="*"){return u.slice(1)}break}return[u]};var q=$s.map(t,r);q.unshift(s[0]);return q}});KhanUtil.myComputeOperators.frac=KhanUtil.myComputeOperators["/"];KhanUtil.myComputeOperators.dfrac=KhanUtil.myComputeOperators["/"];KhanUtil.myComputeOperators["*show"]=KhanUtil.myComputeOperators["*"];KhanUtil.isVarFrac=function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);return((s==="/"||s==="dfrac")&&q.length===2&&KhanUtil.isUniformVarInt(q[0])&&KhanUtil.isUniformVarInt(q[1])&&m(q[1]))}else{console.log("ERROR55");return false}}};KhanUtil.isVarFracAdd=function(r){if(typeof r==="number"){return false}else{if(typeof r==="object"){var s=r[0],q=r.slice(1);if((s==="+")||(s==="-")){return(q.length===2&&(KhanUtil.isVarFrac(q[0])||KhanUtil.isVarFrac(q[1])))}else{return false}}else{console.log("ERROR55");return false}}};KhanUtil.isVarFracAddEq=function(q){return(KhanUtil.isEq(q)&&KhanUtil.isMFVar(q[1])&&KhanUtil.isMFVar(q[2])&&(KhanUtil.isVarFracAdd(q[1])||KhanUtil.isVarFracAdd(q[2])))};function b(q){return KhanUtil.isGenGraph(q)||KhanUtil.isStandardEq(q)||KhanUtil.isStandardIneq(q)}function a(q){var s=false;if(typeof q==="object"){var t=q[0],r=q.slice(1);if(t===";"&&r.length===2){s=a(r[0])&&b(r[1])}else{s=b(q)}}return s}KhanUtil.isGraphStdSet=a;var j=function(q){if(KhanUtil.isSimpleSystem(q)){return"isSimpleSystem"}else{if(KhanUtil.isLinEq(q)){return"isLinEq"}else{if(KhanUtil.isSPolynomial(q)){return"isPolynomial"}else{if(KhanUtil.isPolySet(q)){return"isPolySet"}else{if(KhanUtil.isNumber(q)){return"isNumber"}else{if(KhanUtil.isSimpleAdd(q)){return"isSimpleAdd"}else{if(KhanUtil.isSimpleExpDiv(q)){return"isSimpleExpDiv"}else{if(KhanUtil.isExpDiv(q)){return"isExpDiv"}else{if(KhanUtil.isFrac(q)){return"isFrac"}else{if(KhanUtil.isSimpleFracAdd(q)){return"isSimpleFracAdd"}else{if(KhanUtil.isSimpleFracMult(q)){return"isSimpleFracMult"}else{if(KhanUtil.isSimpleFracExp(q)){return"isSimpleFracExp"}else{if(KhanUtil.isSimpleGenFracExp(q)){return"isSimpleGenFracExp"}else{if(KhanUtil.isSimpleExpMult(q)){return"isSimpleExpMult"}else{if(KhanUtil.isExpMult(q)){return"isExpMult"}else{if(KhanUtil.isSimpleExpExp(q)){return"isSimpleExpExp"}else{if(KhanUtil.isExpExp(q)){return"isExpExp"}else{if(KhanUtil.isCoefSimpleExp(q)){return"isCoefSimpleExp"}else{if(KhanUtil.isNegSimpleExp(q)){return"isNegSimpleExp"}else{if(KhanUtil.isCoefVar(q)){return"isCoefVar"}else{if(KhanUtil.isSimpleGenCoefAdd(q)){return"isSimpleGenCoefAdd"}else{if(KhanUtil.isCoefSimpleExpMult(q)){return"isCoefSimpleExpMult"}else{if(KhanUtil.isCoefExpProd(q)){return"isCoefExpProd"}else{if(KhanUtil.isAddTermsSq(q)){return"isAddTermsSq"}else{if(KhanUtil.isAddTermsCube(q)){return"isAddTermsCube"}else{if(KhanUtil.isSimpleExp0(q)){return"isSimpleExp0"}else{if(KhanUtil.isAddTermsMult(q)){return"isAddTermsMult"}else{if(m(q)&&KhanUtil.isAddTerms(q)){return"isAddTerms"}else{if(KhanUtil.isSimpleVar(q,"x")){return"isSimpleVar"}else{if(KhanUtil.isNumEq(q)){return"isNumEq"}else{if(KhanUtil.isNumEqSet(q)){return"isNumEqSet"}else{if(KhanUtil.isNumIneq(q)){return"isNumIneq"}else{if(KhanUtil.isVarLinEq(q)){return"isVarLinEq"}else{if(KhanUtil.isyxEq(q)){return"isyxEq"}else{if(KhanUtil.isPoint(q)){return"isPoint"}else{if(KhanUtil.isGraphSet(q)&&KhanUtil.getPolys(q).length==1&&KhanUtil.isEq(KhanUtil.getPolys(q)[0])){return"isGraphSetOne"}else{if(KhanUtil.isGraphSet(q)){return"isGraphSet"}else{if(KhanUtil.isUniformVar(q)){return"isUniformVar"}else{if(KhanUtil.isMVar(q)&&KhanUtil.isAddTermsGen1(q)){return"isMVarAddTerms"}else{if(KhanUtil.isMVar(q)){return"isMVar"}else{if(KhanUtil.isVarQuadEq(q)){return"isVarQuadEq"}else{if(KhanUtil.isVarLinIneq(q)){return"isVarLinIneq"}else{if(KhanUtil.isNumCompoundIneq(q)){return"isNumCompoundIneq"}else{if(KhanUtil.isVarLinCompoundIneq(q)){return"isVarLinCompoundIneq"}else{if(KhanUtil.isNumCompGatomEq(q)){return"isNumCompGatomEq"}else{if(KhanUtil.isNumCompGatomIneq(q)){return"isNumCompGatomIneq"}else{if(KhanUtil.isVarLinCompGatomIneq(q)){return"isVarLinCompGatomIneq"}else{if(typeof q==="object"&&q.length==3&&q[0]==="@"&&KhanUtil.isPoint(q[2])){return"evalStmtAtPt"}else{if(typeof q==="object"&&q.length==3&&q[0]==="@"&&KhanUtil.isVeqSet(q[2])){return"evalStmtAtVeqSet"}else{if(typeof q==="object"&&q.length==3&&q[0]==="@"){return"evalStmt"}else{if(KhanUtil.isStandardEq(q)){return"isStandardEq"}else{if(KhanUtil.isStandardIneq(q)){return"isStandardIneq"}else{if(KhanUtil.isSimpleVarFracEq(q)){return"isSimpleVarFracEq"}else{if(m(q)&&KhanUtil.isMFVar(q)){return"isMFVar"}else{if(KhanUtil.isMFPolyEq(q)&&KhanUtil.getGVarEq(q).length>1){return"isMPolyEq"}else{if(KhanUtil.isMFPolyIneq(q)&&KhanUtil.getGVarEq(q).length>1){return"isMPolyIneq"}else{if(KhanUtil.isVarFracAddEq(q)&&KhanUtil.getGVarEq(q).length==1){return"isVarFracAddEq"}else{if(KhanUtil.isGraphStdSet(q)){return"isGraphSet"}else{if(m(q)&&(KhanUtil.isEq(q)||KhanUtil.isIneq(q)||KhanUtil.isMPolyEqSet(q))){return"containsVarEq"}else{if(m(q)){return"containsVar"}else{if(KhanUtil.isSetExpr(q)){return"isSetExpr"}else{if(typeof q==="object"&&q.length>=1&&q[0]==="eof"){return"isEof"}else{return"isOther"}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}};KhanUtil.typeOfAns=j},{}]},{},[1]);(function e(b,g,d){function c(m,j){if(!g[m]){if(!b[m]){var i=typeof require=="function"&&require;if(!j&&i){return i(m,!0)}if(a){return a(m,!0)}var k=new Error("Cannot find module '"+m+"'");throw k.code="MODULE_NOT_FOUND",k}var h=g[m]={exports:{}};b[m][0].call(h.exports,function(l){var o=b[m][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[m].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(b,c,a){var f=function(g){return new KhanUtil.Polynomial(0,0,[g])};$s.extend(KhanUtil,{Polynomial:function(k,i,o,m,h){var l=function(q,p,r){if(typeof q==="undefined"||q===0){return null}if(r===0){return q}else{if(r===1){return["*",q,p]}else{return["*",q,["^",p,r]]}}};var g=function(q,p){if(q===1){return p}else{if(q===-1){return["-",p]}else{return["*",q,p]}}};var j=function(q,p,r){if(typeof q==="undefined"||q===0){return null}q=KhanUtil.roundPrec(q);if(r===0){return q}else{if(r===1){return g(q,["var",p])}else{return g(q,["^",["var",p],r])}}};var n=function(r){var p,q;if(typeof r==="number"){p=r;q=0}else{if($s.isArray(r)&&!$s.isArray(r[2])){p=r[1];q=1}else{if($s.isArray(r)&&$s.isArray(r[2])){p=r[1];q=r[2][2]}}}return{coef:p,degree:q}};if(i>=k){this.minDegree=k;this.maxDegree=i}else{this.minDegree=i;this.maxDegree=k}this.coefs=o||KhanUtil.randCoefs(this.minDegree,this.maxDegree);this.variable=(typeof m!=="undefined")?m:"x";this.myvariable=(typeof m!=="undefined")?m:false;this.setvariable=(typeof m!=="undefined")?true:false;this.name=h||"f";this.findMaxDegree=function(p){if(!p){for(var q=this.maxDegree;q>=this.minDegree;q--){if(this.coefs[q]!==0){return q}}return 0}else{for(var q=p.length-1;q>=0;q--){if(p[q]!==0){return q}}return-1}};this.findMinDegree=function(p){if(!p){for(var q=this.minDegree;q<=this.maxDegree;q++){if(this.coefs[q]!==0){return q}}}else{for(var q=0;q<p.length;q++){if(p[q]!==0){return q}}return-1}};this.getCoef=function(p){var q=0;if(this.findMaxDegree()>=p){q=this.coefs[p]}if(isNaN(q)){q=0}return q};this.evalAt=function(q){var u;if(typeof q==="number"){u=q}else{u=q.coefs[0]}var s=f(0);var t=JSON.stringify(s);console.log(t);for(var p=0;p<=this.maxDegree;p++){var r=this.coefs[p]*(Math.pow(u,p));s=s.add(r);t=JSON.stringify(s)}return s};this.evalAtFast=function(q){var s=0;for(var p=this.minDegree;p<=this.maxDegree;p++){var r=this.coefs[p]*(Math.pow(q,p));s=s+r}return s};this.polyToExpr=function(q){if(typeof q==="undefined"){q=this.variable}var s=["+"];for(var p=this.maxDegree;p>=this.minDegree;p--){var r=j(this.coefs[p],q,p);if(r!=null){s.push(r)}}if(s.length===1){s=0}else{if(s.length===2){s=s[1]}}return s};this.expr=function(q){if(typeof q==="undefined"){q=this.variable}var s=["+"];for(var p=this.maxDegree;p>=this.minDegree;p--){var r=l(this.coefs[p],q,p);if(r!=null){s.push(r)}}if(s.length===1){s.push(0)}return s};this.getNumberOfTerms=function(){return this.expr().length-1};this.getCoefAndDegreeForTerm=function(q){var p=this.getNumberOfTerms();q=((q%p)+p)%p;return n(this.expr()[q+1])};this.text=function(){return KhanUtil.expr(this.expr(this.variable))};this.toString=this.text;this.hintEvalOf=function(p){return KhanUtil.expr(this.expr(p))};this.evalOf=function(p){return KhanUtil.expr(this.expr(p),true)};this.hint=function(q){var p=[];p.push("<p><code>"+this.name+"("+q+") = "+this.hintEvalOf(q)+"</code></p>");p.push("<p><code>"+this.name+"("+q+") = "+this.evalOf(q)+"</code></p>");return p};this.gcd=function(s){if(typeof s==="number"){s=f(s)}var r;var p=[];for(var q=this.minDegree;q<=this.maxDegree;q++){var t=this.getCoef(q);t=Math.abs(t);if(t!==0){if(!KhanUtil.isInt(t)){return 1}else{p.push(t)}}}for(q=s.minDegree;q<=s.maxDegree;q++){t=s.getCoef(q);t=Math.abs(t);if(t!==0){if(!KhanUtil.isInt(t)){return 1}else{p.push(t)}}}if(p.length===0){r=1}else{if(p.length===1){r=p[0]}else{r=KhanUtil.getGCD.apply(KhanUtil,p)}}return r};this.add=function(t){if(typeof t==="number"){t=f(t)}var p=[];var s=Math.min(this.minDegree,t.minDegree);var q=Math.max(this.maxDegree,t.maxDegree);for(var r=s;r<=q;r++){var u=0;u+=r<=this.maxDegree?this.coefs[r]:0;u+=r<=t.maxDegree?t.coefs[r]:0;p[r]=u}var v;if(this.setvariable){v=this.myvariable}else{if(t.setvariable){v=t.myvariable}}return new KhanUtil.Polynomial(s,q,p,v)};this.subtract=function(p){return this.add(p.multiply(-1))};this.multiply=function(t){var p=[];if(typeof t==="number"){for(var r=0;r<this.coefs.length;r++){p[r]=this.coefs[r]*t}var u;if(this.setvariable){u=this.myvariable}else{if(t.setvariable){u=t.myvariable}}return new KhanUtil.Polynomial(this.minDegree,this.maxDegree,p,u)}else{for(var r=this.minDegree;r<=this.maxDegree;r++){if(this.coefs[r]===0){continue}for(var q=t.minDegree;q<=t.maxDegree;q++){if(t.coefs[q]===0){continue}var s=this.coefs[r]*t.coefs[q];if(p[r+q]===undefined){p[r+q]=s}else{p[r+q]+=s}}}for(var r=0;r<Math.max(1,p.length);r++){if(p[r]===undefined){p[r]=0}}var u;if(this.setvariable){u=this.myvariable}else{if(t.setvariable){u=t.myvariable}}return new KhanUtil.Polynomial(Math.min(this.minDegree,t.minDegree),p.length-1,p,u)}};this.pow=function(r){var q;if(typeof r==="number"){q=r}else{q=r.coefs[0]}var s=f(1);for(var p=0;p<q;p++){s=s.multiply(this)}return s};return this},randCoefs:function d(k,h){var g=[];var l=true;for(var j=h;j>=k;j--){g[j]=KhanUtil.randRange(-7,7);l=l&&g[j]===0}return l?d(k,h):g}});$s.extend(KhanUtil,{MPolynomial:function(g){var k=function(o,n,p){if(typeof o==="undefined"||o===0){return null}if(p===0){return o}else{if(p===1){return["*",o,n]}else{return["*",o,["^",n,p]]}}};var i=function(o,n){if(o===1){return n}else{if(o===-1){return["-",n]}else{return["*",o,n]}}};var j=function(t,o){if(typeof t==="undefined"||t===0){return null}t=KhanUtil.roundPrec(t);var s="x";var u=0;var p=1;if(o==="0"){return t}else{var r=o.split(",");for(var n=0;n<r.length;n++){var q=r[n];s=q[0];u=parseInt(q.slice(1));if(n===0){p=h(s,u)}else{p=["*",p,h(s,u)]}}}return i(t,p)};var l=function(p){var o=0;if(p==="0"){return 0}else{var r=p.split(",");for(var n=0;n<r.length;n++){var q=r[n];var s=parseInt(q.slice(1));o+=s}}return o};var h=function(n,o){if(o===0){return 1}else{if(o===1){return["var",n]}else{return["^",["var",n],o]}}};var m=function(w,v){var A={};if(w==="0"&&v==="0"){return"0"}else{if(w==="0"){return v}else{if(v==="0"){return w}}}var q=w.split(",");for(var u=0;u<q.length;u++){var t=q[u];var n=t[0];var s=parseInt(t.slice(1));if(A[n]===undefined){A[n]=s}else{A[n]+=s}}var z=v.split(",");for(u=0;u<z.length;u++){t=z[u];n=t[0];s=parseInt(t.slice(1));if(A[n]===undefined){A[n]=s}else{A[n]+=s}}var y=[];for(var r in A){y.push(r);y=y.sort()}var p=[];for(u=0;u<y.length;u++){n=y[u];var o=""+n+A[n];p.push(o)}var x=p.join(",");return x};this.coefs=g;this.getCoef=function(n){var o=0;o=this.coefs[n];if(isNaN(o)){o=0}return o};this.evalAt=function(n){var q;if(typeof n==="number"){q=n}else{q=n.coefs[""]}var o=KhanUtil.mconstant(0);var p=JSON.stringify(o);console.log(p);return o};this.evalAtFast=function(n){var o=0;return o};this.polyToExpr=function(){var r=["+"];var o=[];var s=[];for(var p in this.coefs){if(p!=="0"){o.push(p)}else{s.push(p)}}o.push.apply(o,s);for(var n=0;n<o.length;n++){p=o[n];var q=j(this.coefs[p],p);if(q!=null){r.push(q)}}if(r.length===1){r=0}else{if(r.length===2){r=r[1]}}return r};this.maxDegree=function(){var o=0;for(var n in this.coefs){var p=l(this.coefs[n],n);if(p>o){o=p}}return o};this.expr=function(o){if(typeof o==="undefined"){o=this.variable}var q=["+"];for(var n=this.maxDegree;n>=this.minDegree;n--){var p=k(this.coefs[n],o,n);if(p!=null){q.push(p)}}if(q.length===1){q.push(0)}return q};this.text=function(){return KhanUtil.expr(this.expr(this.variable))};this.toString=this.text;this.hintEvalOf=function(n){return KhanUtil.expr(this.expr(n))};this.evalOf=function(n){return KhanUtil.expr(this.expr(n),true)};this.gcd=function(q){if(typeof q==="number"){q=KhanUtil.mconstant(q)}var p;var n=[];for(var o=this.minDegree;o<=this.maxDegree;o++){var r=this.getCoef(o);r=Math.abs(r);if(r!==0){if(!KhanUtil.isInt(r)){return 1}else{n.push(r)}}}for(o=q.minDegree;o<=q.maxDegree;o++){r=q.getCoef(o);r=Math.abs(r);if(r!==0){if(!KhanUtil.isInt(r)){return 1}else{n.push(r)}}}if(n.length===0){p=1}else{if(n.length===1){p=n[0]}else{p=KhanUtil.getGCD.apply(KhanUtil,n)}}return p};this.add=function(p){if(typeof p==="number"){p=KhanUtil.mconstant(p)}var n={};for(var o in this.coefs){if(n[o]===undefined){n[o]=this.coefs[o]}else{n[o]+=this.coefs[o]}}for(o in p.coefs){if(n[o]===undefined){n[o]=p.coefs[o]}else{n[o]+=p.coefs[o]}}return new KhanUtil.MPolynomial(n)};this.subtract=function(n){return this.add(n.multiply(-1))};this.multiply=function(s){var n={};if(typeof s==="number"){for(var q in this.coefs){n[q]=this.coefs[q]*s}return new KhanUtil.MPolynomial(n)}else{for(var q in this.coefs){if(this.coefs[q]===0){continue}for(var o in s.coefs){if(s.coefs[o]===0){continue}var r=this.coefs[q]*s.coefs[o];var p=m(q,o);if(n[p]===undefined){n[p]=r}else{n[p]+=r}}}return new KhanUtil.MPolynomial(n)}};this.pow=function(p){var o;if(typeof p==="number"){o=p}else{o=p.coefs[""]}var q=KhanUtil.mconstant(1);for(var n=0;n<o;n++){q=q.multiply(this)}return q};return this}});$s.extend(KhanUtil,{MFPolynomial:function(u,z){var q=function(C,B,D){if(typeof C==="undefined"||C===0){return null}if(D===0){return C}else{if(D===1){return["*",C,B]}else{return["*",C,["^",B,D]]}}};var v=function(C,B){if(C===1){return B}else{if(C===-1){return["-",B]}else{return["*",C,B]}}};var t=function(H,C){if(typeof H==="undefined"||H===0){return null}H=KhanUtil.roundPrec(H);var G="x";var I=0;var D=1;if(C==="0"){return H}else{var F=C.split(",");for(var B=0;B<F.length;B++){var E=F[B];var G=E[0];I=parseInt(E.slice(1));if(B===0){D=y(G,I)}else{D=["*",D,y(G,I)]}}}return v(H,D)};var w=function(C){var H={};if(C==="0"){return H}else{var E=C.split(",");for(var B=0;B<E.length;B++){var D=E[B];var F=D[0];var G=parseInt(D.slice(1));if(G!=0){H[F]=G}}}return H};var o=function(D,C){var F={};if(D===undefined){return C}else{for(var E in C){if(D[E]!==undefined){var B=Math.min(D[E],C[E]);if(B!==0){F[E]=B}}}}return F};var n=function(C,B){var D=1;if(C===undefined){if(KhanUtil.isInt(B)&&B!==0){return B}else{return 1}}else{if(KhanUtil.isInt(C)&&KhanUtil.isInt(B)){D=KhanUtil.getGCD(C,B);if(D===0){D=1}return D}else{return 1}}};var i=function(E,B){var F={};if(B===undefined){return E}else{for(var D in E){var C=0;if(B[D]!==undefined){C=E[D]-B[D]}else{C=E[D]}if(C!==0){F[D]=C}}}return F};var k=function(D){var C=0;if(D==="0"){return 0}else{var F=D.split(",");for(var B=0;B<F.length;B++){var E=F[B];var G=parseInt(E.slice(1));C+=G}}return C};var y=function(B,C){if(C===0){return 1}else{if(C===1){return["var",B]}else{return["^",["var",B],C]}}};var s=function(H,G){var K={};if(H==="0"&&G==="0"){return"0"}else{if(H==="0"){return G}else{if(G==="0"){return H}}}var C=H.split(",");for(var F=0;F<C.length;F++){var E=C[F];var B=E[0];var D=parseInt(E.slice(1));if(K[B]===undefined){K[B]=D}else{K[B]+=D}}var J=G.split(",");for(F=0;F<J.length;F++){E=J[F];B=E[0];D=parseInt(E.slice(1));if(K[B]===undefined){K[B]=D}else{K[B]+=D}}var I=x(K);return I};var x=function(E){var D=[];for(var B in E){D.push(B);D=D.sort()}var F=[];for(var C=0;C<D.length;C++){var I=D[C];var H=""+I+E[I];F.push(H)}var G=F.join(",");if(G===""){G="0"}return G};this.coefs=u;var A=1;if(z===undefined){z={"0":1};A=0}this.dcoefs=z;this.d1=A;this.getCoef=function(B){var C=0;C=this.coefs[B];if(isNaN(C)){C=0}return C};this.polyToExpr=function(){if(this.noDenom()){return p(this.coefs)}else{var C=p(this.coefs);var B=p(this.dcoefs);return["/",C,B]}};var l=function(B,D){var H={};for(var E in B){var G=w(E);var F=i(G,D);var C=x(F);H[C]=B[E]}return H};var j=function(B,E){var D={};for(var C in B){D[C]=B[C]/E}return D};this.polyDegReduce=function(){var D=this.getmindeg();var C=l(this.dcoefs,D);var B=l(this.coefs,D);return new KhanUtil.MFPolynomial(B,C)};this.polyNumReduce=function(){var E=this.getminnum();var C=j(this.dcoefs,E);var B=j(this.coefs,E);var D=new KhanUtil.MFPolynomial(B,C);if(D.neg1Denom()){return D.polyNeg1Reduce()}else{return D}};this.polyNeg1Reduce=function(){var C=j(this.dcoefs,-1);var B=j(this.coefs,-1);return new KhanUtil.MFPolynomial(B,C)};this.getmindeg=function(){if(this.noDenom()){return{}}else{var B;for(var C in this.dcoefs){var D=w(C);B=o(B,D)}for(C in this.coefs){var D=w(C);B=o(B,D)}return B}};this.getminnum=function(){if(this.noDenom()){return 1}else{var D;for(var C in this.dcoefs){var B=this.dcoefs[C];D=n(D,B)}for(C in this.coefs){var B=this.coefs[C];D=n(D,B)}return D}};this.polyDegReduces=function(){var B=this.getmindeg();if(h(B).length>0){return true}else{return false}};this.polyNumReduces=function(){var B=this.getminnum();if(B>1){return true}else{if(this.neg1Denom()){return true}else{return false}}};var p=function(B){var G=["+"];var D=[];var H=[];for(var E in B){if(E!=="0"){D.push(E)}else{H.push(E)}}D.push.apply(D,H);for(var C=0;C<D.length;C++){E=D[C];var F=t(B[E],E);if(F!=null){G.push(F)}}if(G.length===1){G=0}else{if(G.length===2){G=G[1]}}return G};this.maxDegree=function(){var C=0;for(var B in this.coefs){var D=k(this.coefs[B],B);if(D>C){C=D}}return C};this.noDenom=function(){return this.d1===0||(this.dcoefs["0"]===1&&h(this.dcoefs).length===1)};this.neg1Denom=function(){return(this.dcoefs["0"]<0&&h(this.dcoefs).length===1)};var h=function(D){var C=[];for(var B in D){C.push(B)}return C};this.add=function(F){if(typeof F==="number"){F=KhanUtil.mfconstant(F)}var C={};var E={};if(this.noDenom()&&F.noDenom()){C=r(this.coefs,F.coefs);return new KhanUtil.MFPolynomial(C)}else{if(g(this.dcoefs,F.dcoefs)){C=r(this.coefs,F.coefs);return new KhanUtil.MFPolynomial(C,this.dcoefs)}else{var D=m(this.coefs,F.dcoefs);var B=m(F.coefs,this.dcoefs);var C=r(D,B);E=m(this.dcoefs,F.dcoefs);return new KhanUtil.MFPolynomial(C,E)}}};this.subtract=function(B){return this.add(B.multiply(-1))};var r=function(E,D){var B={};for(var C in E){if(B[C]===undefined){B[C]=E[C]}else{B[C]+=E[C]}}for(C in D){if(B[C]===undefined){B[C]=D[C]}else{B[C]+=D[C]}}return B};var g=function(D,C){for(var B in D){if(D[B]!==undefined&&D[B]!==0){if(D[B]!==C[B]){return false}}}for(B in C){if(C[B]!==undefined&&C[B]!==0){if(D[B]!==C[B]){return false}}}return true};this.multiply=function(E){var B={};var C={};if(typeof E==="number"){for(var D in this.coefs){B[D]=this.coefs[D]*E}return new KhanUtil.MFPolynomial(B,this.dcoefs)}else{B=m(this.coefs,E.coefs);C=m(this.dcoefs,E.dcoefs);return new KhanUtil.MFPolynomial(B,C)}};var m=function(G,F){var B={};for(var E in G){if(G[E]===0){continue}for(var C in F){if(F[C]===0){continue}var H=G[E]*F[C];var D=s(E,C);if(B[D]===undefined){B[D]=H}else{B[D]+=H}}}return B};this.divide=function(D){var B={};if(KhanUtil.isNumber(D)){return this.multiply(1/KhanUtil.evalExpr(D))}else{var C=new KhanUtil.MFPolynomial(D.dcoefs,D.coefs);return this.multiply(C)}};this.pow=function(D){var C;if(KhanUtil.isNumber(D)){C=KhanUtil.evalExpr(D)}else{C=D.coefs["0"]}var E=KhanUtil.mfconstant(1);if(C>=0){for(var B=0;B<C;B++){E=E.multiply(this)}}else{for(var B=0;B<-C;B++){E=E.divide(this)}}return E};return this}})},{}]},{},[1]);(function e(b,g,d){function c(m,j){if(!g[m]){if(!b[m]){var i=typeof require=="function"&&require;if(!j&&i){return i(m,!0)}if(a){return a(m,!0)}var k=new Error("Cannot find module '"+m+"'");throw k.code="MODULE_NOT_FOUND",k}var h=g[m]={exports:{}};b[m][0].call(h.exports,function(l){var o=b[m][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[m].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(d,f,c){(function(){var g=function(h){var y=40,i=40,q,u;$(h).css("position","relative");var k=Raphael(h);$(h).children("div").css("position","absolute");var p={"stroke-width":2,fill:"none"};var t=function(A){if(typeof A==="number"){return t([A,A])}var z=A[0],B=A[1];return[z*y,B*i]};var v=function v(A){if(typeof A==="number"){return v([A,A])}var z=A[0],B=A[1];return[(z-q[0])*y,(u[1]-B)*i]};var m=function(A){function z(B){if(B===0){return B}else{if(B<0){return-z(-B)}else{return Math.max(0.000001,Math.min(B,100000000000000000000))}}}return $.map(A,function(B,D){if(B===true){return"z"}else{var C=v(B);return(D===0?"M":"L")+z(C[0])+" "+z(C[1])}}).join("")};var j=function(z){var A={scale:function(C){if(typeof C==="number"){C=[C,C]}y=C[0];i=C[1];k.setSize((q[1]-q[0])*y,(u[1]-u[0])*i)},clipRect:function(E){var C=E[0],D=E[1];C[1]+=D[1];return{"clip-rect":v(C).concat(t(D)).join(" ")}},strokeWidth:function(C){return{"stroke-width":parseFloat(C)}},rx:function(C){return{rx:t([C,0])[0]}},ry:function(C){return{ry:t([0,C])[1]}},r:function(D){var C=t([D,D]);return{rx:C[0],ry:C[1]}}};var B={};$.each(z||{},function(D,F){var C=A[D];if(typeof C==="function"){$.extend(B,C(F))}else{var E=D.replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase();B[E]=F}});return B};var w=function(C,z){var B=Math.sqrt(Math.pow(C[0],2)+Math.pow(C[1],2));var A=Math.atan2(C[1],C[0]);if(A<0){A+=2*Math.PI}if(!z){A=A*180/Math.PI}return[B,A]};var x=function(A,z){if(typeof A==="number"){A=[A,A]}z=z*Math.PI/180;return[A[0]*Math.cos(z),A[1]*Math.sin(z)]};var s=function(B,A,z){if(typeof B==="number"){B=[B,B]}A=A*Math.PI/180;return[B[0]*Math.cos(A)+z,B[1]*Math.sin(A)]};var l=function r(K){var E=K.constructor.prototype;if(E===Raphael.el){if(K.type==="path"&&typeof K.arrowheadsDrawn==="undefined"){var H=K.attr("stroke-width"),L=0.6+0.4*H;var A=K.getTotalLength();if(A===0){}else{var G=k.set();var F=k.path("M-3 4 C-2.75 2.5 0 0.25 0.75 0C0 -0.25 -2.75 -2.5 -3 -4");var B=K.getPointAtLength(A-0.4);var D=K.getPointAtLength(A-0.75*L);var z=Math.atan2(B.y-D.y,B.x-D.x)*180/Math.PI;var J=K.attr();delete J.path;var I=K.getSubpath(0,A-0.75*L);I=k.path(I).attr(J);I.arrowheadsDrawn=true;K.remove();F.rotate(z,0.75,0).scale(L,L,0.75,0).translate(D.x,D.y).attr(J).attr({"stroke-linejoin":"round","stroke-linecap":"round"});F.arrowheadsDrawn=true;G.push(I);G.push(F);return G}}}else{if(E===Raphael.st){for(var C=0,A=K.items.length;C<A;C++){r(K.items[C])}}}};var o={circle:function(A,z){return k.ellipse.apply(k,v(A).concat(t([z,z])))},ellipse:function(z,A){return k.ellipse.apply(k,v(z).concat(t(A)))},arc:function(z,G,H,B,C){H=(H%360+360)%360;B=(B%360+360)%360;var K=v(z);var D=t(G);var E=x(G,H);var F=x(G,B);var A=v([z[0]+E[0],z[1]+E[1]]);var J=v([z[0]+F[0],z[1]+F[1]]);var I=((B-H)%360+360)%360>180;return k.path("M"+A.join(" ")+"A"+D.join(" ")+" 0 "+(I?1:0)+" 0 "+J.join(" ")+(C?"L"+K.join(" ")+"z":""))},path:function(z){var A=k.path(m(z));A.graphiePath=z;return A},line:function(A,z){return this.path([A,z])},grid:function(A,C){var B=p.step||[1,1];var E=k.set();var z=B[0]*Math.ceil(A[0]/B[0]);for(;z<=A[1];z+=B[0]){E.push(this.line([z,C[0]],[z,C[1]]))}var D=B[1]*Math.ceil(C[0]/B[1]);for(;D<=C[1];D+=B[1]){E.push(this.line([A[0],D],[A[1],D]))}return E},label:function(H,J,F,z){J=""+J;var E={center:[-0.5,-0.5],above:[-0.5,-1],"above right":[0,-1],right:[0,-0.5],"below right":[0,0],"below f":[-0.2,0],below:[-0.5,0],below2:[-0.7,0],"below left":[-1,0],left:[-1,-0.5],left2:[-1.5,-0.65],left3:[-0.9,-0.7],left4:[-1.1,-0.65],"above left":[-1,-1]};var C=v(H);var G;G=$("<span>").append(M(J));G.css("visibility","hidden");G.addClass("labelclass");var A=p["label-distance"];G.css({position:"absolute",left:C[0],top:C[1],padding:(A!=null?A:7)+"px"}).appendTo(h);var B=function(L){G.css("visibility","");var N=E[F||"center"];G.css({marginLeft:Math.round(L[0]*N[0]),marginTop:Math.round(L[1]*N[1])})};var I=0;var K=[G.outerWidth(),G.outerHeight()];if(K[1]>18){B(K)}else{var D=9*J.length+13;if(J==="0"){D=17}else{if(J.length===1){D=17}else{if(J[0]==="-"){D+=15}if(J.indexOf(".")!==-1){D-=12}}}B([D,26])}return G},plotParametric:function(E,A){p.strokeLinejoin||(p.strokeLinejoin="round");p.strokeLinecap||(p.strokeLinecap="round");var D=[];var C=A[0],z=A[1];var F=(z-C)/(p["plot-points"]||800);for(var B=C;B<=z;B+=F){D.push(E(B))}return this.path(D)},plotParametric2:function(D,C,z){p.strokeLinejoin||(p.strokeLinejoin="round");p.strokeLinecap||(p.strokeLinecap="round");var I=[];var F=[];var J=[];var B=C[0],E=C[1];var A=(E-B)/(150);if(typeof z==="undefined"){z=1}for(var G=B;G<=E;G+=A){var H=D(G);if(typeof H[z]==="number"&&!isNaN(H[z])){F.push(H)}else{if(F.length>1){J.push(F.slice(0))}F=[]}}if(F.length>1){J.push(F.slice(0))}return J},plotPolar:function(C,A){var B=A[0],z=A[1];p["plot-points"]||(p["plot-points"]=2*(z-B)*y);return this.plotParametric(function(D){return x(C(D),D*180/Math.PI)},A)},plot:function(C,A){var B=A[0],z=A[1];p["plot-points"]||(p["plot-points"]=2*(z-B)*y);return this.plotParametric(function(D){return[D,C(D)]},A)},plot2:function(C,A){var B=A[0],z=A[1];p["plot-points"]||(p["plot-points"]=2*(z-B)*y);return this.plotParametric2(function(D){return[D,C(D)]},A,1)},plot2X:function(C,A){var B=A[0],z=A[1];p["plot-points"]||(p["plot-points"]=2*(z-B)*i);return this.plotParametric2(function(D){return[C(D),D]},A,0)}};var n={raphael:k,init:function(A){var C=A.scale||[40,40];C=(typeof C==="number"?[C,C]:C);y=C[0];i=C[1];if(A.range==null){return Khan.error("range should be specified in graph init")}q=A.range[0];u=A.range[1];var z=(q[1]-q[0])*y,B=(u[1]-u[0])*i;k.setSize(z,B);$(h).css({width:z,height:B});return this},style:function(A,B){var D=j(A);var C;if(typeof B==="function"){var z=p;p=$.extend({},p,D);C=B.call(n);p=z}else{$.extend(p,D)}return C},scalePoint:v,scaleVector:t,polar:x,relpolar:s,cartToPolar:w};$.each(o,function(z){n[z]=function(){var E=arguments[arguments.length-1];var B=p;var A;if(typeof E==="object"&&!$.isArray(E)){p=$.extend({},p,j(E));var D=[].slice.call(arguments,0,arguments.length-1);A=o[z].apply(o,D)}else{p=$.extend({},p);A=o[z].apply(o,arguments)}var C=A.constructor.prototype;if(C===Raphael.el||C===Raphael.st){A.attr(p);if(p.arrows){A=l(A)}}else{if(A instanceof $){A.css(p)}}p=B;return A}});n.graphInit=function(E){E=E||{};$.each(E,function(Y,X){if(!Y.match(/.*Opacity$/)&&Y!=="range"&&typeof X==="number"){E[Y]=[X,X]}if(Y==="range"){if(X.constructor===Array){if(X[0].constructor!==Array){E[Y]=[[-X[0],X[0]],[-X[1],X[1]]]}}else{if(typeof X==="number"){E[Y]=[[-X,X],[-X,X]]}}}});var S=function(X){try{var Y=MutNumStr(X);return Y}catch(Z){return X}};var N=E.range||[[-10,10],[-10,10]],W=E.scale||[20,20],A=E.grid||true,Q=E.gridOpacity||0.1,D=E.gridStep||[1,1],R=E.axes||true,L=E.axisArrows||"",z=E.axisOpacity||1,V=E.ticks||true,G=E.tickStep||[2,2],K=E.tickLen||[5,5],I=E.tickOpacity||1,T=E.labels||E.labelStep||false,B=E.labelStep||[1,1],O=E.labelOpacity||1,H=E.unityLabels||false,F=E.labelFormat||S,J=E.xLabelFormat||F,P=E.yLabelFormat||F,C=E.smartLabelPositioning!=null?E.smartLabelPositioning:true;if(C){var U=function(X){return function(Y){return(X(Y)+"")}};J=U(J);P=U(P)}this.init({range:N,scale:W});if(A){this.grid(N[0],N[1],{stroke:"#000000",opacity:Q,step:D})}if(R){if(L==="<->"||true){this.style({stroke:"#000000",opacity:z,strokeWidth:2,arrows:"->"},function(){this.path([[0,0],[N[0][0],0]]);this.path([[0,0],[N[0][1],0]]);this.path([[0,0],[0,N[1][0]]]);this.path([[0,0],[0,N[1][1]]])})}else{if(L==="->"||L===""){this.style({stroke:"#000000",opacity:z,strokeWidth:2,arrows:L},function(){this.path([[N[0][0],0],[N[0][1],0]]);this.path([[0,N[1][0]],[0,N[1][1]]])})}}}if(V){this.style({stroke:"#000000",opacity:I,strokeWidth:1},function(){var aa=D[0]*G[0],Y=K[0]/W[1],ac=N[0][0],Z=N[0][1];for(var X=aa;X<=Z;X+=aa){if(X<Z||!L){this.line([X,-Y],[X,Y])}}for(var X=-aa;X>=ac;X-=aa){if(X>ac||!L){this.line([X,-Y],[X,Y])}}aa=D[1]*G[1];Y=K[1]/W[0];ac=N[1][0];Z=N[1][1];for(var ab=aa;ab<=Z;ab+=aa){if(ab<Z||!L){this.line([-Y,ab],[Y,ab])}}for(var ab=-aa;ab>=ac;ab-=aa){if(ab>ac||!L){this.line([-Y,ab],[Y,ab])}}})}if(T){this.style({stroke:"#000000",opacity:O},function(){var Z=D[0]*G[0]*B[0],ab=N[0][0],Y=N[0][1];for(var X=Z;X<=Y;X+=Z){if(X<Y||!L){this.label([X,0],J(X),"below2")}}for(var X=-Z*(H?1:2);X>=ab;X-=Z){if(X>ab||!L){this.label([X,0],J(X),"below")}}Z=D[1]*G[1]*B[1];ab=N[1][0];Y=N[1][1];for(var aa=Z;aa<=Y;aa+=Z){if(aa<Y||!L){if(aa<10){this.label([0,aa],P(aa),"left2")}else{this.label([0,aa],P(aa),"left4")}}}for(var aa=-Z*(H?1:2);aa>=ab;aa-=Z){if(aa>ab||!L){this.label([0,aa],P(aa),"left3")}}})}};return n};$.fn.graphie=function(h){return this.find(".graphie").andSelf().filter(".graphie").each(function(){var j=$(this).text(),k;if(j.match(/Created with Rapha\xebl/)){return}$(this).empty();if($(this).data("update")){var l=$(this).data("update");$(this).remove();var i=$("#problemarea").add(h);k=i.find("#"+l).data("graphie")}else{k=g(this);$(this).data("graphie",k)}if(typeof k.graph==="undefined"){k.graph={}}j="(function() {"+j+"})()";KhanUtil.currentGraph=k;$.tmpl.getVAR(j,k)}).end()};KhanUtil.createGraph2=g})();function a(h,g,m){var p=KhanUtil.currentGraph;var o=p.raphael.set();m=m||0;var k=0;$.each(h,function(q,r){k+=r});var l=0;$.each(h,function(s,t){var q=l/k,r=t/k;o.push(p.path([[q,m],[q+r,m],[q+r,m+1],[q,m+1]],{stroke:"#fff",fill:g[s]}));l+=t});for(var j=0;j<=k;j++){var n=j/k;o.push(p.line([n,m+0],[n,m+1],{stroke:"#fff"}))}return o}$.extend(KhanUtil,{FILL_OPACITY:0.3,dragging:false,initAutoscaledGraph:function(g,h){var i=KhanUtil.currentGraph;h=$.extend({xpixels:500,ypixels:500,xdivisions:20,ydivisions:20,labels:true,unityLabels:true,range:(g===undefined?[[-10,10],[-10,10]]:g)},h);h.scale=[h.xpixels/(h.range[0][1]-h.range[0][0]),h.ypixels/(h.range[1][1]-h.range[1][0])];h.gridStep=[(h.range[0][1]-h.range[0][0])/h.xdivisions,(h.range[1][1]-h.range[1][0])/h.ydivisions];i.xpixels=h.xpixels;i.ypixels=h.ypixels;i.range=h.range;i.scale=h.scale;i.graphInit(h)},addMouseLayer:function(){var k=KhanUtil.currentGraph;k.xpixels=k.raphael.canvas.offsetWidth;k.ypixels=k.raphael.canvas.offsetHeight;if(k.xpixels===undefined){k.xpixels=k.raphael.width;k.ypixels=k.raphael.height}k.scale=[k.scalePoint([1,1])[0]-k.scalePoint([0,0])[0],k.scalePoint([0,0])[1]-k.scalePoint([1,1])[1]];var j=0-(k.scalePoint([0,0])[0]/k.scale[0]);var h=(k.xpixels/k.scale[0])+j;var g=k.scalePoint([0,0])[1]/k.scale[1];var i=g-(k.ypixels/k.scale[1]);k.range=[[j,h],[i,g]];k.mouselayer=Raphael(k.raphael.canvas.parentNode,k.xpixels,k.ypixels);$(k.mouselayer.canvas).css("z-index",1);Khan.scratchpad.disable()},findAngle:function(i,h,j){if(j===undefined){var g=i[0]-h[0];var k=i[1]-h[1];if(!g&&!k){return 0}return(180+Math.atan2(-k,-g)*180/Math.PI+360)%360}else{return KhanUtil.findAngle(i,j)-KhanUtil.findAngle(h,j)}},drawArcs:function(n,i,m,k){var l=KhanUtil.findAngle(n,i);var h=KhanUtil.findAngle(m,i);if(((h-l)%360+360)%360>180){var p=l;l=h;h=p}var j=0.3;if((((h-l)%360+360)%360)<75){j=(-0.6/90)*(((h-l)%360+360)%360)+0.8}var o=[];for(var g=0;g<k;++g){o.push(KhanUtil.currentGraph.arc(i,j+(0.15*g),l,h))}return o},addMovablePoint:function(h){var g=$.extend(true,{graph:KhanUtil.currentGraph,coord:[0,0],snapX:0,snapY:0,highlight:false,dragging:false,visible:true,constraints:{fixed:false,constrainX:false,constrainY:false,fixedAngle:{},fixedDistance:{}},lineStarts:[],lineEnds:[],normalStyle:{fill:KhanUtil.ORANGE,stroke:KhanUtil.ORANGE},highlightStyle:{fill:KhanUtil.ORANGE,stroke:KhanUtil.ORANGE}},h);if(h.coordX!==undefined){g.coord[0]=h.coordX}if(h.coordY!==undefined){g.coord[1]=h.coordY}var i=g.graph;if(g.visible){i.style(g.normalStyle,function(){g.visibleShape=i.ellipse(g.coord,[4/i.scale[0],4/i.scale[1]])})}g.normalStyle.scale=1;g.highlightStyle.scale=2;g.applyConstraint=function(t,q,l){var u=t.slice();var p={};if(l){$.extend(p,{fixed:false,constrainX:false,constrainY:false,fixedAngle:{},fixedDistance:{}},q)}else{$.extend(p,this.constraints,q)}if(p.constrainX){u=[this.coord[0],t[1]]}else{if(p.constrainY){u=[t[0],this.coord[1]]}else{if(typeof p.fixedAngle.angle==="number"&&typeof p.fixedDistance.dist==="number"){var r=p.fixedAngle.vertex.coord||p.fixedAngle.vertex;var n=p.fixedAngle.ref.coord||p.fixedAngle.ref;var k=p.fixedDistance.point.coord||p.fixedDistance.point;var s=(p.fixedAngle.angle+KhanUtil.findAngle(n,r))*Math.PI/180;var m=p.fixedDistance.dist;u[0]=m*Math.cos(s)+k[0];u[1]=m*Math.sin(s)+k[1]}else{if(typeof p.fixedAngle.angle==="number"){var r=p.fixedAngle.vertex.coord||p.fixedAngle.vertex;var n=p.fixedAngle.ref.coord||p.fixedAngle.ref;var s=(p.fixedAngle.angle+KhanUtil.findAngle(n,r))*Math.PI/180;var o=KhanUtil.findAngle(t,r)*Math.PI/180;var j=KhanUtil.getDistance(t,r);var m=j*Math.cos(s-o);m=m<1?1:m;u[0]=m*Math.cos(s)+r[0];u[1]=m*Math.sin(s)+r[1]}else{if(typeof p.fixedDistance.dist==="number"){var k=p.fixedDistance.point.coord||p.fixedDistance.point;var o=KhanUtil.findAngle(t,k);var m=p.fixedDistance.dist;o=o*Math.PI/180;u[0]=m*Math.cos(o)+k[0];u[1]=m*Math.sin(o)+k[1]}else{if(p.fixed){u=g.coord}}}}}}return u};if(g.visible&&!g.constraints.fixed){g.mouseTarget=i.mouselayer.circle(i.scalePoint(g.coord)[0],i.scalePoint(g.coord)[1],15);g.mouseTarget.attr({fill:"#000",opacity:0});$(g.mouseTarget[0]).css("cursor","move");$(g.mouseTarget[0]).bind("vmousedown vmouseover vmouseout",function(j){if(j.type==="vmouseover"){g.highlight=true;if(!KhanUtil.dragging){g.visibleShape.animate(g.highlightStyle,50)}}else{if(j.type==="vmouseout"){g.highlight=false;if(!g.dragging){g.visibleShape.animate(g.normalStyle,50)}}else{if(j.type==="vmousedown"&&(j.which===1||j.which===0)){j.preventDefault();$(document).bind("vmousemove vmouseup",function(k){k.preventDefault();g.dragging=true;KhanUtil.dragging=true;var n=k.pageX-$(i.raphael.canvas.parentNode).offset().left;var m=k.pageY-$(i.raphael.canvas.parentNode).offset().top;n=Math.max(10,Math.min(i.xpixels-10,n));m=Math.max(10,Math.min(i.ypixels-10,m));if(g.snapX){n=Math.round(n/(i.scale[0]*g.snapX))*(i.scale[0]*g.snapX)}if(g.snapY){m=Math.round(m/(i.scale[1]*g.snapY))*(i.scale[1]*g.snapY)}if(g.snapX!==0){n=Math.round(n/(i.scale[0]*g.snapX))*(i.scale[0]*g.snapX)}if(g.snapY!==0){m=Math.round(m/(i.scale[1]*g.snapY))*(i.scale[1]*g.snapY)}var x=n/i.scale[0]+i.range[0][0];var w=i.range[1][1]-m/i.scale[1];if(g.snapX!==0){x=Math.round(x/g.snapX)*g.snapX}if(g.snapY!==0){w=Math.round(w/g.snapY)*g.snapY}if(g.constraints.fixedDistance.snapPoints){var A=2*Math.PI/g.constraints.fixedDistance.snapPoints;var t=g.constraints.fixedDistance.dist;var r=g.constraints.fixedDistance.point;var q=(r[0]-i.range[0][0])*i.scale[0];var p=(-r[1]+i.range[1][1])*i.scale[1];var l=n-q;var z=-m+p;var o=Math.atan(z/l);var v=l<0;if(v){o+=Math.PI}o=Math.round(o/A)*A;l=t*Math.cos(o);z=t*Math.sin(o);n=l+q;m=-z+p;x=KhanUtil.roundTo(5,n/i.scale[0]+i.range[0][0]);w=KhanUtil.roundTo(5,i.range[1][1]-m/i.scale[1])}var s=g.applyConstraint([x,w]);x=s[0];w=s[1];if(k.type==="vmousemove"){var u=true;if($.isFunction(g.onMove)){var y=g.onMove(x,w);if(y===false){u=false}if($.isArray(y)){x=y[0];w=y[1]}}n=(x-i.range[0][0])*i.scale[0];m=(-w+i.range[1][1])*i.scale[1];if(u){g.visibleShape.attr("cx",n);g.mouseTarget.attr("cx",n);g.visibleShape.attr("cy",m);g.mouseTarget.attr("cy",m);g.coord=[x,w];g.updateLineEnds()}}else{if(k.type==="vmouseup"){$(document).unbind("vmousemove vmouseup");g.dragging=false;KhanUtil.dragging=false;if($.isFunction(g.onMoveEnd)){var y=g.onMoveEnd(x,w);if($.isArray(y)){x=y[0];w=y[1];n=(x-i.range[0][0])*i.scale[0];m=(-w+i.range[1][1])*i.scale[1];g.visibleShape.attr("cx",n);g.mouseTarget.attr("cx",n);g.visibleShape.attr("cy",m);g.mouseTarget.attr("cy",m);g.coord=[x,w]}}g.visibleShape.animate(g.normalStyle,50)}}})}}}})}g.moveTo=function(l,j,n){var q=KhanUtil.getDistance(this.graph.scalePoint([l,j]),this.graph.scalePoint(this.coord));var o=q*5;var m=i.scalePoint([l,j]);var k={cx:m[0],cy:m[1]};if(n){var p={cx:this.visibleShape.attr("cx"),cy:this.visibleShape.attr("cy")};$(p).animate(k,{duration:o,easing:"linear",step:function(r,s){g.visibleShape.attr(s.prop,r);g.mouseTarget.attr(s.prop,r);if(s.prop==="cx"){g.coord[0]=r/i.scale[0]+i.range[0][0]}else{g.coord[1]=i.range[1][1]-r/i.scale[1]}g.updateLineEnds()}})}else{this.visibleShape.animate(k,o);this.mouseTarget.animate(k,o)}this.coord=[l,j];if($.isFunction(this.onMove)){this.onMove(l,j)}};g.updateLineEnds=function(){$(this.lineStarts).each(function(){this.coordA=g.coord;this.transform()});$(this.lineEnds).each(function(){this.coordZ=g.coord;this.transform()})};g.setCoord=function(k){if(this.visible){var j=i.scalePoint(k);this.visibleShape.attr({cx:j[0]});this.visibleShape.attr({cy:j[1]});this.mouseTarget.attr({cx:j[0]});this.mouseTarget.attr({cy:j[1]})}this.coord=k.slice()};g.toBack=function(){if(this.visible){this.mouseTarget.toBack();this.visibleShape.toBack()}};g.toFront=function(){if(this.visible){this.mouseTarget.toFront();this.visibleShape.toFront()}};return g},addMovableLine:function(h){h=$.extend({graph:KhanUtil.currentGraph,coord:0,snap:0,vertical:false},h);var i=h.graph;var g={highlight:false,dragging:false,coord:h.coord};i.style({fill:KhanUtil.ORANGE,stroke:KhanUtil.ORANGE},function(){if(!h.vertical){g.visibleShape=i.line([i.range[0][0],0],[i.range[0][1],0]);g.visibleShape.translate(0,-h.coord*i.scale[0])}else{g.visibleShape=i.line([0,i.range[1][0]],[0,i.range[1][1]]);g.visibleShape.translate(h.coord*i.scale[1],0)}});if(!h.vertical){g.mouseTarget=i.mouselayer.rect(0,-(i.range[0][0]+h.coord)*i.scale[0]-10,i.xpixels,20)}else{g.mouseTarget=i.mouselayer.rect((i.range[1][1]+h.coord)*i.scale[1]-10,0,20,i.ypixels)}g.mouseTarget.attr({fill:"#000",opacity:0});$(g.mouseTarget[0]).css("cursor","move");$(g.mouseTarget[0]).bind("vmousedown vmouseover vmouseout",function(j){if(j.type==="vmouseover"){if(!KhanUtil.dragging){g.highlight=true;g.visibleShape.animate({"stroke-width":5},50)}}else{if(j.type==="vmouseout"){g.highlight=false;if(!g.dragging){g.visibleShape.animate({"stroke-width":2},50)}}else{if(j.type==="vmousedown"&&(j.which===1||j.which===0)){j.preventDefault();$(document).bind("vmousemove vmouseup",function(o){o.preventDefault();g.dragging=true;KhanUtil.dragging=true;var n=o.pageX-$(i.raphael.canvas.parentNode).offset().left;var m=o.pageY-$(i.raphael.canvas.parentNode).offset().top;n=Math.max(10,Math.min(i.xpixels-10,n));m=Math.max(10,Math.min(i.ypixels-10,m));if(h.snap){n=Math.round(n/(i.scale[0]*h.snap))*(i.scale[0]*h.snap);m=Math.round(m/(i.scale[1]*h.snap))*(i.scale[1]*h.snap)}var l=n/i.scale[0]+i.range[0][0];var k=i.range[1][1]-m/i.scale[1];if(o.type==="vmousemove"){if(h.vertical){g.visibleShape.translate((l*i.scale[0])-g.visibleShape.attr("translation").x,0);g.mouseTarget.attr("x",n-10);g.coord=l;if($.isFunction(g.onMove)){g.onMove(l)}}else{g.visibleShape.translate(0,(-k*i.scale[1])-g.visibleShape.attr("translation").y,0);g.mouseTarget.attr("y",m-10);g.coord=k;if($.isFunction(g.onMove)){g.onMove(k)}}}else{if(o.type==="vmouseup"){$(document).unbind("vmousemove vmouseup");g.dragging=false;KhanUtil.dragging=false;if(!g.highlight){g.visibleShape.animate({"stroke-width":2},50)}}}})}}}});g.setCoord=function(j){if(h.vertical){this.visibleShape.translate(j*i.scale[0]-this.visibleShape.attr("translation").x,0);this.mouseTarget.attr("x",j/i.scale[0]+i.range[0][0]-10)}else{this.visibleShape.translate(0,-j*i.scale[1]-this.visibleShape.attr("translation").y);this.mouseTarget.attr("y",(i.range[1][1]-j)*i.scale[1]-10)}this.coord=j;if(jQuery.isFunction(this.onMove)){this.onMove(j)}};g.moveTo=function(l){if(h.vertical){var k=Math.abs(this.coord-l)*i.scale[0];var j=k*5;this.visibleShape.animate({translation:[l*i.scale[0]-this.visibleShape.attr("translation").x,0]},j);this.mouseTarget.animate({y:l/i.scale[0]+i.range[0][0]-10},j)}else{var k=Math.abs(this.coord-l)*i.scale[1];var j=k*5;this.visibleShape.animate({translation:[0,-l*i.scale[1]-this.visibleShape.attr("translation").y]},j);this.mouseTarget.animate({y:(i.range[1][1]-l)*i.scale[1]-10},j)}this.coord=l;if($.isFunction(this.onMove)){g.onMove(l)}};return g},svgPath:function(g){return $.map(g,function(h,j){if(h===true){return"z"}return(j===0?"M":"L")+h[0]+" "+h[1]}).join("")},getDistance:function(h,g){return Math.sqrt((h[0]-g[0])*(h[0]-g[0])+(h[1]-g[1])*(h[1]-g[1]))},addInteractiveFn:function(k,r){r=$.extend({graph:KhanUtil.currentGraph,snap:0,range:[KhanUtil.currentGraph.range[0][0],KhanUtil.currentGraph.range[0][1]]},r);var q=r.graph;var h={highlight:false};q.style({stroke:KhanUtil.BLUE},function(){h.visibleShape=q.plot(k,r.range)});q.style({fill:KhanUtil.BLUE,stroke:KhanUtil.BLUE},function(){h.cursorPoint=q.ellipse([0,k(0)],[4/q.scale[0],4/q.scale[1]])});h.cursorPoint.attr("opacity",0);var m=30;var p=[];var i=(r.range[1]-r.range[0])/100;for(var n=r.range[0];n<=r.range[1];n+=i){var j=(k(n-0.001)-k(n+0.001))/0.002;var g=n;var l=k(n)+(m/(2*q.scale[1]));if(j!==0){var o=(-1/(j*(q.scale[1]/q.scale[0])))/(q.scale[1]/q.scale[0]);if(j<0){g=n-Math.cos(-Math.atan(o*(q.scale[1]/q.scale[0])))*m/(2*q.scale[0]);l=o*(n-g)+k(n)}else{if(j>0){g=n+Math.cos(-Math.atan(o*(q.scale[1]/q.scale[0])))*m/(2*q.scale[0]);l=o*(n-g)+k(n)}}}p.push([(g-q.range[0][0])*q.scale[0],(q.range[1][1]-l)*q.scale[1]])}for(var n=r.range[1];n>=r.range[0];n-=i){var j=(k(n-0.001)-k(n+0.001))/0.002;var g=n;var l=k(n)-(m/(2*q.scale[1]));if(j!==0){var o=(-1/(j*(q.scale[1]/q.scale[0])))/(q.scale[1]/q.scale[0]);if(j<0){g=n+Math.cos(-Math.atan(o*(q.scale[1]/q.scale[0])))*m/(2*q.scale[0]);l=o*(n-g)+k(n)}else{if(j>0){g=n-Math.cos(-Math.atan(o*(q.scale[1]/q.scale[0])))*m/(2*q.scale[0]);l=o*(n-g)+k(n)}}}p.push([(g-q.range[0][0])*q.scale[0],(q.range[1][1]-l)*q.scale[1]])}h.mouseTarget=q.mouselayer.path(this.svgPath(p));h.mouseTarget.attr({fill:"#000",opacity:0});$(h.mouseTarget[0]).bind("vmouseover vmouseout vmousemove",function(z){z.preventDefault();var y=z.pageX-$(q.raphael.canvas.parentNode).offset().left;var w=z.pageY-$(q.raphael.canvas.parentNode).offset().top;y=Math.max(10,Math.min(q.xpixels-10,y));w=Math.max(10,Math.min(q.ypixels-10,w));if(r.snap){y=Math.round(y/(q.scale[0]*r.snap))*(q.scale[0]*r.snap)}var u=y/q.scale[0]+q.range[0][0];var t=q.range[1][1]-w/q.scale[1];var A=0;var v=Math.sqrt((u)*(u)+(t)*(t));for(var s=r.range[0];s<r.range[1];s+=((r.range[1]-r.range[0])/q.xpixels)){if(Math.sqrt((s-u)*(s-u)+(k(s)-t)*(k(s)-t))<v){A=s;v=Math.sqrt((s-u)*(s-u)+(k(s)-t)*(k(s)-t))}}h.cursorPoint.attr("cx",(q.range[0][1]+A)*q.scale[0]);h.cursorPoint.attr("cy",(q.range[1][1]-k(A))*q.scale[1]);u=A;t=k(A);if($.isFunction(h.onMove)){h.onMove(u,t)}if(z.type==="vmouseover"){h.cursorPoint.animate({opacity:1},50);h.highlight=true}else{if(z.type==="vmouseout"){h.highlight=false;h.cursorPoint.animate({opacity:0},50);if($.isFunction(h.onLeave)){h.onLeave(u,t)}}}});h.mouseTarget.toBack();return h},bogusShape:{animate:function(){},attr:function(){},remove:function(){}},addMovableLineSegment:function(h){var l=$.extend({graph:KhanUtil.currentGraph,coordA:[0,0],coordZ:[1,1],snapX:0,snapY:0,fixed:false,ticks:0,normalStyle:{stroke:KhanUtil.BLUE,"stroke-width":2},highlightStyle:{stroke:KhanUtil.ORANGE,"stroke-width":6},highlight:false,dragging:false,tick:[],extendLine:false,constraints:{fixed:false,constrainX:false,constrainY:false}},h);if(h.pointA!==undefined){l.coordA=h.pointA.coord;l.pointA.lineStarts.push(l)}else{if(h.coordA!==undefined){l.coordA=h.coordA.slice()}}if(h.pointZ!==undefined){l.coordZ=h.pointZ.coord;l.pointZ.lineEnds.push(l)}else{if(h.coordA!==undefined){l.coordA=l.coordA.slice()}}var k=l.graph;k.style(l.normalStyle);for(var j=0;j<l.ticks;++j){l.tick[j]=KhanUtil.bogusShape}var m=KhanUtil.svgPath([[0,0],[k.scale[0],0]]);for(var j=0;j<l.ticks;++j){var g=(0.5*k.scale[0])-(l.ticks-1)*1+(j*2);m+=KhanUtil.svgPath([[g,-7],[g,7]])}l.visibleLine=k.raphael.path(m);l.visibleLine.attr(l.normalStyle);if(!l.fixed){l.mouseTarget=k.mouselayer.rect(k.scalePoint([k.range[0][0],k.range[1][1]])[0],k.scalePoint([k.range[0][0],k.range[1][1]])[1]-15,k.scaleVector([1,1])[0],30);l.mouseTarget.attr({fill:"#000",opacity:0})}l.transform=function(r){if(r){if(typeof this.pointA==="object"){this.coordA=this.pointA.coord}if(typeof this.pointZ==="object"){this.coordZ=this.pointZ.coord}}var s=KhanUtil.findAngle(this.coordZ,this.coordA);var q=k.scalePoint(this.coordA);var n=KhanUtil.getDistance(this.coordA,this.coordZ);if(this.extendLine){if(this.coordA[0]!==this.coordZ[0]){var i=(this.coordZ[1]-this.coordA[1])/(this.coordZ[0]-this.coordA[0]);var p=i*(k.range[0][0]-this.coordA[0])+this.coordA[1];var o=i*(k.range[0][1]-this.coordA[0])+this.coordA[1];if(this.coordA[0]<this.coordZ[0]){q=k.scalePoint([k.range[0][0],p]);q[0]++}else{q=k.scalePoint([k.range[0][1],o]);q[0]--}n=KhanUtil.getDistance([k.range[0][0],p],[k.range[0][1],o])}else{if(this.coordA[1]<this.coordZ[1]){q=k.scalePoint([this.coordA[0],k.range[1][0]])}else{q=k.scalePoint([this.coordA[0],k.range[1][1]])}n=k.range[1][1]-k.range[1][0]}}this.visibleLine.translate(q[0]-this.visibleLine.attr("translation").x,q[1]-this.visibleLine.attr("translation").y);this.visibleLine.rotate(-s,q[0],q[1]);this.visibleLine.scale(n,1,q[0],q[1]);if(!this.fixed){this.mouseTarget.translate(q[0]-this.mouseTarget.attr("translation").x,q[1]-this.mouseTarget.attr("translation").y);this.mouseTarget.rotate(-s,q[0],q[1]);this.mouseTarget.scale(n,1,q[0],q[1])}};l.toBack=function(){if(!l.fixed){l.mouseTarget.toBack()}l.visibleLine.toBack()};l.toFront=function(){if(!l.fixed){l.mouseTarget.toFront()}l.visibleLine.toFront()};if(!l.fixed&&!l.constraints.fixed){$(l.mouseTarget[0]).css("cursor","move");$(l.mouseTarget[0]).bind("vmousedown vmouseover vmouseout",function(i){if(i.type==="vmouseover"){if(!KhanUtil.dragging){l.highlight=true;l.visibleLine.animate(l.highlightStyle,50)}}else{if(i.type==="vmouseout"){l.highlight=false;if(!l.dragging){l.visibleLine.animate(l.normalStyle,50)}}else{if(i.type==="vmousedown"&&(i.which===1||i.which===0)){i.preventDefault();var u=(i.pageX-$(k.raphael.canvas.parentNode).offset().left)/k.scale[0]+k.range[0][0];var t=k.range[1][1]-(i.pageY-$(k.raphael.canvas.parentNode).offset().top)/k.scale[1];if(l.snapX>0){u=Math.round(u/l.snapX)*l.snapX}if(l.snapY>0){t=Math.round(t/l.snapY)*l.snapY}var q=[l.coordA[0]-u,l.coordA[1]-t];var o=[l.coordZ[0]-u,l.coordZ[1]-t];var p=-Math.min(k.scaleVector(q)[0],k.scaleVector(o)[0]);var s=Math.max(k.scaleVector(q)[0],k.scaleVector(o)[0]);var n=Math.max(k.scaleVector(q)[1],k.scaleVector(o)[1]);var r=-Math.min(k.scaleVector(q)[1],k.scaleVector(o)[1]);$(document).bind("vmousemove vmouseup",function(B){B.preventDefault();l.dragging=true;KhanUtil.dragging=true;var A=B.pageX-$(k.raphael.canvas.parentNode).offset().left;var z=B.pageY-$(k.raphael.canvas.parentNode).offset().top;A=Math.max(p+10,Math.min(k.xpixels-10-s,A));z=Math.max(n+10,Math.min(k.ypixels-10-r,z));var y=A/k.scale[0]+k.range[0][0];var w=k.range[1][1]-z/k.scale[1];if(l.snapX>0){y=Math.round(y/l.snapX)*l.snapX}if(l.snapY>0){w=Math.round(w/l.snapY)*l.snapY}if(B.type==="vmousemove"){if(l.constraints.constrainX){y=l.coordA[0]-q[0]}if(l.constraints.constrainY){w=l.coordA[1]-q[1]}var x=y+q[0]-l.coordA[0];var v=w+q[1]-l.coordA[1];l.coordA=[y+q[0],w+q[1]];l.coordZ=[y+o[0],w+o[1]];l.transform();if($.isFunction(l.onMove)){l.onMove(x,v)}}else{if(B.type==="vmouseup"){$(document).unbind("vmousemove vmouseup");l.dragging=false;KhanUtil.dragging=false;if(!l.highlight){l.visibleLine.animate(l.normalStyle,50)}if($.isFunction(l.onMoveEnd)){l.onMoveEnd()}}}})}}}})}if(l.pointA!==undefined){l.pointA.toFront()}if(l.pointZ!==undefined){l.pointZ.toFront()}l.transform();return l},createSorter:function(){var h={};var g;h.init=function(k){g=$("[id="+k+"]").last();var i=g.wrap("<div>").parent();var l=$("<li>");l.addClass("placeholder");i.addClass("sortable ui-helper-clearfix");var m=g.find("li").outerWidth(true);var j=g.find("li").length;g.find("li").each(function(o,n){$(n).bind("vmousedown",function(q){if(q.type==="vmousedown"&&(q.which===1||q.which===0)){q.preventDefault();$(n).addClass("dragging");var r=$(this).index();l.insertAfter(n);$(this).css("z-index",100);var s=$(this).offset();var p={left:q.pageX-s.left-3,top:q.pageY-s.top-3};$(n).css({position:"absolute"});$(n).offset({left:s.left,top:s.top});$(document).bind("vmousemove vmouseup",function(w){w.preventDefault();if(w.type==="vmousemove"){$(n).offset({left:w.pageX-p.left,top:w.pageY-p.top});var x=g.offset().left;var u=Math.max(0,Math.min(j-1,Math.floor((w.pageX-x)/m)));if(u!==r){r=u;if(u===0){l.prependTo(g);$(n).prependTo(g)}else{l.detach();$(n).detach();var v=g.find("li")[u-1];l.insertAfter(v);$(n).insertAfter(v)}s.left=x+m*u}}else{if(w.type==="vmouseup"){$(document).unbind("vmousemove vmouseup");var t=$(n).offset();$(t).animate(s,{duration:150,step:function(y,z){t[z.prop]=y;$(n).offset(t)},complete:function(){$(n).css("z-index",0);l.detach();$(n).css({position:"static"});$(n).removeClass("dragging")}})}}})}})})};h.getContent=function(){var i=[];g.find("li").each(function(k,j){i.push($.trim($(j).find("code").text()))});return i};h.setContent=function(i){g.find("li").each(function(k,j){$(j).find("code").text(i[k]);MathJax.Hub.Queue(["Reprocess",MathJax.Hub,j])})};return h}});function b(h){var s=KhanUtil.currentGraph;this.set=s.raphael.set();this.cx=h[0];this.cy=h[1];var n="#789";var p=this;var g=8.05;var l=s.scalePoint([this.cx-g,this.cy+g-0.225]);this.set.push(s.mouselayer.image(Khan.urlBase+"images/protractor.png",l[0],l[1],322,161));var m=function(w,t){var v=s.scaleVector(g);var u=s.scalePoint(h);var r=Math.sin((w+90)*Math.PI/180)*(v[0]+t)+u[0];var z=Math.cos((w+90)*Math.PI/180)*(v[1]+t)+u[1];return r+","+z};var o=s.raphael.path(" M"+m(180,6)+" L"+m(180,2)+" L"+m(183,10)+" L"+m(180,18)+" L"+m(180,14)+" A"+(s.scaleVector(g)[0]+10)+","+(s.scaleVector(g)[1]+10)+",0,0,1,"+m(170,14)+" L"+m(170,18)+" L"+m(167,10)+" L"+m(170,2)+" L"+m(170,6)+" A"+(s.scaleVector(g)[0]+10)+","+(s.scaleVector(g)[1]+10)+",0,0,0,"+m(180,6)+" Z").attr({stroke:null,fill:KhanUtil.ORANGE});this.set.push(o);this.centerPoint=KhanUtil.addMovablePoint({coord:h,visible:false});this.rotateHandle=KhanUtil.addMovablePoint({coord:[Math.sin(275*Math.PI/180)*(g+0.5)+this.cx,Math.cos(275*Math.PI/180)*(g+0.5)+this.cy],onMove:function(r,u){var t=Math.atan2(p.centerPoint.coord[1]-u,p.centerPoint.coord[0]-r)*180/Math.PI;p.rotate(-t-5,true)}});this.rotateHandle.constraints.fixedDistance.dist=g+0.5;this.rotateHandle.constraints.fixedDistance.point=this.centerPoint;this.rotateHandle.visibleShape.remove();this.rotateHandle.mouseTarget.attr({scale:2});$(this.rotateHandle.mouseTarget[0]).bind("vmouseover",function(r){o.animate({scale:1.5},50)});$(this.rotateHandle.mouseTarget[0]).bind("vmouseout",function(r){o.animate({scale:1},50)});var k=$.map(this.set,function(r){return r.node});this.makeTranslatable=function j(){$(k).css("cursor","move");$(k).bind("vmousedown",function(u){u.preventDefault();var t=u.pageX-$(s.raphael.canvas.parentNode).offset().left;var r=u.pageY-$(s.raphael.canvas.parentNode).offset().top;$(document).bind("vmousemove",function(z){var y=z.pageX-$(s.raphael.canvas.parentNode).offset().left;var x=z.pageY-$(s.raphael.canvas.parentNode).offset().top;y=Math.max(10,Math.min(s.xpixels-10,y));x=Math.max(10,Math.min(s.ypixels-10,x));var w=y-t;var v=x-r;$.each(p.set.items,function(){this.translate(w,v)});p.centerPoint.setCoord([p.centerPoint.coord[0]+w/s.scale[0],p.centerPoint.coord[1]-v/s.scale[1]]);p.rotateHandle.setCoord([p.rotateHandle.coord[0]+w/s.scale[0],p.rotateHandle.coord[1]-v/s.scale[1]]);t=y;r=x});$(document).one("vmouseup",function(v){$(document).unbind("vmousemove")})})};this.rotation=0;this.rotate=function(t,u){var r=s.scalePoint(this.centerPoint.coord);if(u){this.rotation=0}this.set.rotate(this.rotation+t,r[0],r[1]);this.rotation=this.rotation+t;return this};this.moveTo=function q(r,z){var u=KhanUtil.currentGraph;var w=u.scalePoint(p.centerPoint.coord);var t=u.scalePoint([r,z]);var v=KhanUtil.getDistance(w,t)*2;$({x:w[0],y:w[1]}).animate({x:t[0],y:t[1]},{duration:v,step:function(A,B){var y=0;var x=0;if(B.prop==="x"){y=A-u.scalePoint(p.centerPoint.coord)[0]}else{if(B.prop==="y"){x=A-u.scalePoint(p.centerPoint.coord)[1]}}$.each(p.set.items,function(){this.translate(y,x)});p.centerPoint.setCoord([p.centerPoint.coord[0]+y/u.scale[0],p.centerPoint.coord[1]-x/u.scale[1]]);p.rotateHandle.setCoord([p.rotateHandle.coord[0]+y/u.scale[0],p.rotateHandle.coord[1]-x/u.scale[1]])}})};this.rotateTo=function i(t){if(Math.abs(this.rotation-t)>180){this.rotation+=360}var r=Math.abs(this.rotation-t)*5;$({"0":this.rotation}).animate({"0":t},{duration:r,step:function(u,v){p.rotate(u,true);p.rotateHandle.setCoord([Math.sin((u+275)*Math.PI/180)*(g+0.5)+p.centerPoint.coord[0],Math.cos((u+275)*Math.PI/180)*(g+0.5)+p.centerPoint.coord[1]])}})};this.set.attr({opacity:0.5});this.makeTranslatable();return this}},{}]},{},[1]);(function(){function a(c,d,b){b=b||250;this.element=typeof c==="object"?c:document.getElementById(c);this.callback=d;this.isMouseDown=false;this.supportsWebkit3dTransform=("WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix());this.max=parseInt(this.element.getAttribute("max"));if(isNaN(this.max)){this.max=100}this.min=parseInt(this.element.getAttribute("min"));if(isNaN(this.min)){this.min=0}this.value=parseInt(this.element.getAttribute("value"));if(isNaN(this.value)){this.value=0}this.curval=this.value;$("#"+this.element.id).val(this.curval);this.knob=this.element.getElementsByClassName("knob")[0];this.knobWidth=30;this.track=this.element.getElementsByClassName("track")[0];this.trackWidth=b;this.trackOffset=this.element.offsetLeft;this.element.addEventListener("touchstart",this,false);this.element.onmousedown=this.wrap(this,"mousedown")}a.prototype.wrap=function(b,c){return function(d){b[c](d)}};a.prototype.touchstart=function(b){b.preventDefault();this.moveKnobTo(b.targetTouches[0].pageX);this.element.addEventListener("touchmove",this,false);this.element.addEventListener("touchend",this,false);this.element.addEventListener("touchcancel",this,false)};a.prototype.touchmove=function(b){b.preventDefault();this.moveKnobTo(b.targetTouches[0].pageX)};a.prototype.touchend=function(b){b.preventDefault();this.moveKnobTo(b.changedTouches[0].pageX);this.element.removeEventListener("touchmove",this,false);this.element.removeEventListener("touchend",this,false);this.element.removeEventListener("touchcancel",this,false)};a.prototype.touchcancel=function(b){b.preventDefault();this.moveKnobTo(b.changedTouches[0].pageX);this.element.removeEventListener("touchmove",this,false);this.element.removeEventListener("touchend",this,false);this.element.removeEventListener("touchcancel",this,false)};a.prototype.mousedown=function(b){this.oldMoveHandler=window.onmousemove;window.onmousemove=this.wrap(this,"mousemove");this.oldUpHandler=window.onmouseup;window.onmouseup=this.wrap(this,"mouseup");this.moveKnobTo(b.clientX);this.isMouseDown=true};a.prototype.mousemove=function(b){if(!this.isMouseDown){return}this.moveKnobTo(b.pageX)};a.prototype.mouseup=function(b){this.moveKnobTo(b.pageX);this.isMouseDown=false;window.onmousemove=this.oldMoveHandler;window.onmouseup=this.oldUpHandler};a.prototype.moveKnobToValue=function(b){var c=Math.round((b-this.min)/(this.max-this.min)*(this.trackWidth-this.knobWidth-1));if(this.supportsWebkit3dTransform){this.knob.style.webkitTransform="translate3d("+c+"px, 0, 0)"}else{this.knob.style.webkitTransform=this.knob.style.MozTransform=this.knob.style.msTransform=this.knob.style.OTransform=this.knob.style.transform="translateX("+c+"px)"}this.curval=b;$("#"+this.element.id).val(this.curval);this.callback(b)};a.prototype.moveKnobTo=function(b){var c=0,d=0;this.trackOffset=this.element.offsetLeft;d=(b-this.trackOffset+this.knobWidth/2);d=Math.min(d,this.trackWidth);d=Math.max(d-this.knobWidth,0);if(this.supportsWebkit3dTransform){this.knob.style.webkitTransform="translate3d("+d+"px, 0, 0)"}else{this.knob.style.webkitTransform=this.knob.style.MozTransform=this.knob.style.msTransform=this.knob.style.OTransform=this.knob.style.transform="translateX("+d+"px)"}c=Math.round(d/(this.trackWidth-this.knobWidth-1)*(this.max-this.min))+this.min;this.curval=c;$("#"+this.element.id).val(this.curval);this.callback(c)};a.prototype.callback=function(){};a.prototype.handleEvent=function(b){if(typeof(this[b.type])==="function"){return this[b.type](b)}};window.WKSlider=a})();